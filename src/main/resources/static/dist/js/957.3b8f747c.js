"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[957],{246:function(t,a,e){e.d(a,{vJ:function(){return v},SH:function(){return p},px:function(){return r},sZ:function(){return s},jL:function(){return i},YG:function(){return f},yy:function(){return u},o2:function(){return L},lS:function(){return c},kl:function(){return m},Ob:function(){return g},t0:function(){return d},XG:function(){return b},lD:function(){return k},hc:function(){return y}});e(4114);var n=e(4373);function o(){const t=n.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}e(876);const l=o();async function s(){try{const t=await n.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function c(){try{const t=await n.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(t){try{const a=await n.A.get(`/api/complaint/mine/${t}`);return a.data}catch(a){console.error(a)}}async function i(t){try{const a=await n.A.get(`/api/complaint/myList/${t}`);return a.data}catch(a){console.error(a)}}async function u(){try{const t=await n.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function d(t){try{const a=await n.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",a.status),console.log("민원글 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function p(t){try{const a=await n.A.get(`/api/complaint/one/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function m(t){try{const a=await n.A.get(`/api/userInfo/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function f(t){try{const a=await n.A.get(`/api/course/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function v(t){try{const a=await n.A.delete(`/api/complaint/delete/${t}`);return a.data}catch(a){console.error(a)}}async function k(t,a){try{const e=await n.A.patch(`/api/complaint/update/${t}`,a);return e.data}catch(e){console.error(e)}}async function g(t){try{const a=await l.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",a.data),a.data}catch(a){console.error(a)}}async function L(t){try{const a=await n.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function b(t){try{const a=await n.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",a.status),console.log("민원처리정보 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function y(t,a){try{const e=await n.A.patch(`/api/complaint/updateProcessing/${t}`,a);return e.data}catch(e){console.error(e)}}},8957:function(t,a,e){e.r(a),e.d(a,{default:function(){return j}});var n=e(6768),o=e(4232),l=e(144),s=e(5130),c=e(876),r=e(246),i=e(8077),u=e(4373);const d={class:"container"},p={class:"card"},m={class:"card-body p-lg-5 pb-lg-0"},f={class:"d-flex flex-column flex-md-row"},v={class:"flex-md-grow-1 me-md-4"},k={class:"mb-2"},g={class:"d-flex flex-wrap mb-3 align-items-center"},L={class:"mb-3"},b={class:"text-gray-900 fs-3 fw-bold mb-2"},y={class:"fw-bold text-muted fs-6 ps-1"},h={class:"fw-bold text-muted fs-6 ps-1"},w={class:"fw-bold text-muted fs-6 ps-1"},x={class:"fw-bold text-muted fs-6 ps-1"},A={class:"image-container mb-2"},I=["src"],C={class:"card mb-2",style:{height:"auto"}},R={class:"card-body p-0"},_={class:"fs-6 text-gray-600"},T={class:"modal fade",id:"complaint_update",tabindex:"-1","aria-hidden":"true"},N={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content rounded p-0"},$={class:"modal-body scroll-y px-10 px-lg-15 pt-0 pb-15"},K={id:"kt_modal_new_target_form",class:"form"},U={class:"d-flex flex-column mb-8 fv-row mt-3"},M={class:"form-group mb-2"},S={class:"d-flex flex-column mb-8 fv-row"},V={class:"d-flex flex-column mb-8 fv-row"},q={class:"d-flex flex-column mb-8 fv-row mt-2"},B={class:"text-center mt-3"};var D={__name:"ComplaintInfoViewMobile",setup(t){let a=0,e="",D=(0,l.KR)({});(0,n.sV)((async()=>{a=sessionStorage.getItem("complaintNo"),e=localStorage.getItem("userId"),await Y(a),D.value=await(0,r.kl)(O.value.userId),console.log("유저정보",D.value.userNickName)}));const E=(0,l.KR)(""),J=(0,l.KR)(""),j=(0,l.KR)(""),F=(0,l.KR)("");let H,G=0,X=0,O=(0,l.KR)({});async function Y(t){try{const a=await(0,r.SH)(t);O.value=a,console.log("가져온거",O.value)}catch(a){console.error("민원글을 가져오는 중 오류 발생:",a)}}function Z(){c.A.replace({path:"/complaintListMobile"})}function z(t){if(O.value.userId===e)return 1==confirm("정말 삭제하시겠습니까??")&&((0,r.vJ)(t),void Z());alert("신고자만 삭제할 수 있습니다.")}function Q(){if(O.value.userId!==e)return void alert("신고자만 수정할 수 있습니다.");window.scrollTo({top:0,behavior:"smooth"}),E.value=O.value.complaintTitle,J.value=O.value.mountainName,j.value=O.value.complaintContent,F.value=O.value.complaintType;const t=document.querySelector("#complaint_update");H=new i.aF(t),H.show(),setTimeout((()=>{W()}),500)}function W(){const t=document.createElement("script");t.onload=()=>kakao.maps.load(tt),t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=services",document.head.appendChild(t)}function tt(){const t=document.getElementById("map"),a={center:new kakao.maps.LatLng(O.value.latitude,O.value.longitude),level:8},e=new kakao.maps.Map(t,a);var n=new kakao.maps.Marker({position:e.getCenter()});n.setMap(e),kakao.maps.event.addListener(e,"click",(function(t){var a=t.latLng;n.setPosition(a);var e="클릭한 위치의 위도는 "+a.getLat()+" 이고, ";e+="경도는 "+a.getLng()+" 입니다",G=a.getLat(),X=a.getLng();var o=document.getElementById("clickLatlng");o.innerHTML=e}))}async function at(t,a){a.preventDefault(),console.log("Update complaint triggered");let e=await ot();null==e&&(e=O.value.complaintImg),console.log("수정할 글번호 : ",t);const n=O.value.latitude,o=O.value.longitude,l=0!==G?G:n,s=0!==X?X:o,c={complaintNo:t,complaintTitle:E.value,complaintContent:j.value,complaintType:F.value,mountainName:J.value,latitude:l,longitude:s,complaintImg:e||""};O.value.complaintTitle=E.value,O.value.complaintContent=j.value,O.value.complaintType=F.value,O.value.mountainName=J.value,O.value.latitude=G,O.value.longitude=X,O.value.complaintImg=e,(0,r.lD)(t,c),H.hide()}const et=(0,l.KR)(null),nt=t=>{et.value=t.target.files[0]},ot=async()=>{if(!et.value)return null;const t=new FormData;t.append("file",et.value);try{const a=await u.A.post("/api/complaint/upload",t,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(a){return console.error("Error uploading image",a),null}};return(t,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",f,[(0,n.Lk)("div",v,[(0,n.Lk)("div",k,[(0,n.Lk)("div",g,[(0,n.Lk)("button",{class:"styled-button",onClick:a[0]||(a[0]=t=>Z())}," 뒤로가기 ")]),(0,n.Lk)("div",L,[(0,n.Lk)("h1",b,(0,o.v_)((0,l.R1)(O).complaintTitle),1),a[9]||(a[9]=(0,n.Lk)("hr",{class:"separator-line2"},null,-1)),(0,n.Lk)("span",y," 신고자 : "+(0,o.v_)((0,l.R1)(D).userNickName),1),a[10]||(a[10]=(0,n.Lk)("hr",{class:"separator-line"},null,-1)),(0,n.Lk)("span",h," 신고 날짜 : "+(0,o.v_)((0,l.R1)(O).createdAt),1),a[11]||(a[11]=(0,n.Lk)("hr",{class:"separator-line"},null,-1)),(0,n.Lk)("span",w," 신고 유형 : "+(0,o.v_)((0,l.R1)(O).complaintType),1),a[12]||(a[12]=(0,n.Lk)("hr",{class:"separator-line"},null,-1)),(0,n.Lk)("span",x," 산이름 : "+(0,o.v_)((0,l.R1)(O).mountainName),1)]),a[13]||(a[13]=(0,n.Lk)("hr",{class:"separator-line"},null,-1)),(0,n.Lk)("div",A,[(0,n.Lk)("img",{src:(0,l.R1)(O).complaintImg,alt:"Complaint Image",class:"img-fluid"},null,8,I)]),a[14]||(a[14]=(0,n.Lk)("hr",{class:"separator-line"},null,-1)),a[15]||(a[15]=(0,n.Lk)("p",{class:"fw-bold text-muted fs-6 ps-1"},"신고 내용",-1)),(0,n.Lk)("div",C,[(0,n.Lk)("div",R,[(0,n.Lk)("p",_,(0,o.v_)((0,l.R1)(O).complaintContent),1)])]),a[16]||(a[16]=(0,n.Lk)("hr",{class:"separator-line mt-3"},null,-1)),(0,n.Lk)("button",{class:"styled-button2 me-2",onClick:a[1]||(a[1]=t=>Q())},"수정"),(0,n.Lk)("button",{class:"styled-button2",onClick:a[2]||(a[2]=t=>z((0,l.R1)(O).complaintNo))},"삭제")])])])])])]),(0,n.Lk)("div",T,[(0,n.Lk)("div",N,[(0,n.Lk)("div",P,[a[25]||(a[25]=(0,n.Lk)("div",{class:"modal-header pb-0 pe-2 border-0 justify-content-end"},[(0,n.Lk)("div",{class:"","data-bs-dismiss":"modal"},[(0,n.Lk)("button",{class:"searchButton btn btn-sm"},"닫기")])],-1)),(0,n.Lk)("div",$,[(0,n.Lk)("form",K,[a[22]||(a[22]=(0,n.Lk)("div",{class:"mb-8 text-center"},[(0,n.Lk)("h1",{class:"mb-4"},"신고 글 수정"),(0,n.Lk)("div",{class:"text-muted fs-6"},"제목, 이미지, 위치, 내용을 수정하세요.")],-1)),(0,n.Lk)("div",U,[a[17]||(a[17]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"제목")],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control form-control-solid mb-2",name:"target_title","onUpdate:modelValue":a[3]||(a[3]=t=>E.value=t)},null,512),[[s.Jo,E.value]])]),a[23]||(a[23]=(0,n.Lk)("label",{for:"category",class:"d-flex align-items-center fs-6 fw-semibold mb-2"},"구분",-1)),(0,n.Lk)("div",M,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>F.value=t),id:"number",name:"number",class:"form-control",style:{cursor:"pointer"}},a[18]||(a[18]=[(0,n.Lk)("option",{value:"",disabled:""},"유형 선택",-1),(0,n.Lk)("option",{value:"파손"},"파손",-1),(0,n.Lk)("option",{value:"낙석"},"낙석",-1),(0,n.Lk)("option",{value:"야생동물"},"야생동물",-1)]),512),[[s.u1,F.value]])]),(0,n.Lk)("div",S,[a[19]||(a[19]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"산이름")],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control form-control-solid",name:"target_title","onUpdate:modelValue":a[5]||(a[5]=t=>J.value=t)},null,512),[[s.Jo,J.value]])]),a[24]||(a[24]=(0,n.Lk)("div",{class:"mb-3 mt-3"},[(0,n.Lk)("div",{id:"map",class:"map-container"}),(0,n.Lk)("p",null,[(0,n.Lk)("em",null,"지도를 클릭해주세요!")]),(0,n.Lk)("div",{id:"clickLatlng"})],-1)),(0,n.Lk)("div",V,[a[20]||(a[20]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"파일 선택")],-1)),(0,n.Lk)("input",{type:"file",id:"image",onChange:nt,ref:"image"},null,544)]),(0,n.Lk)("div",q,[a[21]||(a[21]=(0,n.Fv)('<label class="d-flex align-items-center fs-6 fw-semibold mb-2" data-v-5aa3d348><span class="required" data-v-5aa3d348>내용</span><span class="ms-1" data-bs-toggle="tooltip" title="내용을 입력하세요. 필수랍니다~" data-v-5aa3d348><i class="ki-duotone ki-information-5 text-gray-500 fs-6" data-v-5aa3d348><span class="path1" data-v-5aa3d348></span><span class="path2" data-v-5aa3d348></span><span class="path3" data-v-5aa3d348></span></i></span></label>',1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control form-control-solid",name:"target_content","onUpdate:modelValue":a[6]||(a[6]=t=>j.value=t),rows:"5"},null,512),[[s.Jo,j.value]])]),(0,n.Lk)("div",B,[(0,n.Lk)("button",{type:"button",class:"searchButton",onClick:a[7]||(a[7]=(0,s.D$)((t=>at((0,l.R1)(O).complaintNo,t)),["prevent"]))},"저장"),(0,n.Lk)("button",{type:"reset",class:"lightButton",onClick:a[8]||(a[8]=a=>t.clearAll())},"모두 지우기")])])])])])])],64))}},E=e(1241);const J=(0,E.A)(D,[["__scopeId","data-v-5aa3d348"]]);var j=J}}]);
//# sourceMappingURL=957.3b8f747c.js.map