"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[753],{246:function(t,e,a){a.d(e,{vJ:function(){return k},SH:function(){return p},px:function(){return r},sZ:function(){return c},jL:function(){return i},YG:function(){return f},yy:function(){return u},o2:function(){return L},lS:function(){return s},kl:function(){return m},Ob:function(){return g},t0:function(){return d},XG:function(){return y},lD:function(){return v},hc:function(){return b}});a(4114);var n=a(4373);function o(){const t=n.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}a(876);const l=o();async function c(){try{const t=await n.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function s(){try{const t=await n.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(t){try{const e=await n.A.get(`/api/complaint/mine/${t}`);return e.data}catch(e){console.error(e)}}async function i(t){try{const e=await n.A.get(`/api/complaint/myList/${t}`);return e.data}catch(e){console.error(e)}}async function u(){try{const t=await n.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function d(t){try{const e=await n.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",e.status),console.log("민원글 작성에 대한 응답 데이터:",e.data),e.data}catch(e){throw console.error("API 요청 중 오류 발생:",e),e}}async function p(t){try{const e=await n.A.get(`/api/complaint/one/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function m(t){try{const e=await n.A.get(`/api/userInfo/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function f(t){try{const e=await n.A.get(`/api/course/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function k(t){try{const e=await n.A.delete(`/api/complaint/delete/${t}`);return e.data}catch(e){console.error(e)}}async function v(t,e){try{const a=await n.A.patch(`/api/complaint/update/${t}`,e);return a.data}catch(a){console.error(a)}}async function g(t){try{const e=await l.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",e.data),e.data}catch(e){console.error(e)}}async function L(t){try{const e=await n.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function y(t){try{const e=await n.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",e.status),console.log("민원처리정보 작성에 대한 응답 데이터:",e.data),e.data}catch(e){throw console.error("API 요청 중 오류 발생:",e),e}}async function b(t,e){try{const a=await n.A.patch(`/api/complaint/updateProcessing/${t}`,e);return a.data}catch(a){console.error(a)}}},7753:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var n=a(6768),o=a(5130),l=a(4232),c=a(144),s=a(876),r=a(246),i=a(4373);const u={class:"card"},d={class:"card-body p-lg-20 pb-lg-0"},p={class:"d-flex flex-column flex-xl-row"},m={class:"flex-lg-row-fluid me-xl-15"},f={class:"mb-17"},k={class:"mb-2"},v={class:"d-flex justify-content-between align-items-center mb-4"},g={class:"row align-items-center mb-2"},L={class:"col-md-10"},y={class:"form-group mb-2"},b={class:"row align-items-center mb-3"},h={class:"col-md-10"},w={class:"d-flex flex-column mb-3 fv-row"},C={class:"mb-4"},A={class:"d-flex justify-content-end"},x={key:0,class:"modal"},K={class:"modal-content"},R={key:0},I=["onClick"];var $={__name:"ComplaintViewMobile",setup(t){const e=(0,c.KR)(37.6584),a=(0,c.KR)(126.9775),$=(0,c.KR)(null),P=(0,c.KR)(null),E=(0,c.KR)(null),M=(0,c.KR)(""),T=(0,c.KR)("");let _=localStorage.getItem("userId"),U=localStorage.getItem("userNickName");const V=(0,c.KR)(""),N=(0,c.KR)(""),S=(0,c.KR)("");let X=e.value,j=a.value;const B=(0,c.KR)(!1),F=(0,c.KR)(""),J=(0,c.KR)([]);let H,D=(0,c.KR)(!1),G=null;function O(){const t=document.createElement("script");t.onload=()=>{kakao.maps.load((()=>{Q(),D.value=!0}))},t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=services",document.head.appendChild(t)}function Q(){const t=document.getElementById("map"),n={center:new kakao.maps.LatLng(e.value,a.value),level:5};H=new kakao.maps.Map(t,n),G=new kakao.maps.Marker({position:H.getCenter()}),G.setMap(H),kakao.maps.event.addListener(H,"click",(function(t){const e=t.latLng;G.setPosition(e),X=e.getLat(),j=e.getLng(),document.getElementById("clickLatlng").innerHTML=`위도: ${e.getLat()}, 경도: ${e.getLng()}`}))}async function q(){try{const t=await i.A.get("/api/recordlocation");console.log("Received response:",t.data),e.value=t.data.latitude,a.value=t.data.longitude,$.value=t.data.altitude,P.value=t.data.speed,E.value=t.data.bearing,M.value=t.data.time}catch(t){console.error("Error fetching location:",t)}}function Y(){B.value=!0}function Z(){B.value=!1}function z(){const t=F.value.trim();if(!t)return void alert("키워드를 입력해주세요!");if(!D.value)return void alert("Kakao Maps가 아직 로드되지 않았습니다.");const e=new kakao.maps.services.Places;e.keywordSearch(t,W)}function W(t,e){e===kakao.maps.services.Status.OK?J.value=t:alert("검색 결과가 없습니다.")}function tt(t){X=t.y,j=t.x;const e=new kakao.maps.LatLng(t.y,t.x);G.setPosition(e),H.setCenter(e),document.getElementById("clickLatlng").innerHTML=`위도: ${t.y}, 경도: ${t.x}`,Z()}(0,n.sV)((()=>{O(),q(),setInterval(q,5e3)}));const et=(0,c.KR)(null),at=t=>{et.value=t.target.files[0]},nt=async()=>{if(!et.value)return null;const t=new FormData;t.append("file",et.value);try{const e=await i.A.post("/api/complaint/upload",t,{headers:{"Content-Type":"multipart/form-data"}});return e.data}catch(e){return console.error("Error uploading image",e),null}};async function ot(){const t=await nt(),e={complaintTitle:T.value,complaintContent:N.value,complaintType:S.value,complaintImg:t||"",userId:_,userNickName:U,mountainName:V.value,latitude:X,longitude:j};try{const t=await(0,r.t0)(e);console.log("서버 응답: ",t)}catch(a){console.error("서버 요청 중 오류 발생: ",a)}}function lt(){ot(),ct()}function ct(){console.log("목록페이지로 이동"),s.A.replace({path:"/complaintListMobile"})}return(t,e)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",f,[(0,n.Lk)("div",k,[(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"styled-button",onClick:e[0]||(e[0]=t=>ct())}," 뒤로가기 ")]),(0,n.Lk)("div",g,[e[7]||(e[7]=(0,n.Lk)("div",{class:"col-md-2"},[(0,n.Lk)("label",{class:"col-form-label fw-bold"},"제목")],-1)),(0,n.Lk)("div",L,[(0,n.bo)((0,n.Lk)("input",{class:"form-control form-control-lg",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>T.value=t)},null,512),[[o.Jo,T.value]])])]),e[9]||(e[9]=(0,n.Lk)("label",{for:"category",class:"col-form-label fw-bold"},"구분",-1)),(0,n.Lk)("div",y,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>S.value=t),id:"number",name:"number",class:"form-control",style:{cursor:"pointer"}},e[8]||(e[8]=[(0,n.Lk)("option",{value:"",disabled:""},"유형 선택",-1),(0,n.Lk)("option",{value:"파손"},"파손",-1),(0,n.Lk)("option",{value:"낙석"},"낙석",-1),(0,n.Lk)("option",{value:"야생동물"},"야생동물",-1)]),512),[[o.u1,S.value]])])]),(0,n.Lk)("div",b,[e[10]||(e[10]=(0,n.Lk)("div",{class:"col-md-2"},[(0,n.Lk)("label",{class:"col-form-label fw-bold"},"산 이름")],-1)),(0,n.Lk)("div",h,[(0,n.bo)((0,n.Lk)("input",{type:"text",id:"groupName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>V.value=t)},null,512),[[o.Jo,V.value]])])]),(0,n.Lk)("button",{type:"button",onClick:Y,class:"mb-2"},"장소 검색"),e[13]||(e[13]=(0,n.Lk)("div",{class:"mb-3"},[(0,n.Lk)("div",{id:"map",class:"map-container"}),(0,n.Lk)("p",null,[(0,n.Lk)("em",null,"지도를 클릭해주세요!")]),(0,n.Lk)("div",{id:"clickLatlng"})],-1)),(0,n.Lk)("div",w,[e[11]||(e[11]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"사진 등록")],-1)),(0,n.Lk)("input",{type:"file",id:"image",onChange:at,ref:"image",accept:"image/*"},null,544)]),(0,n.Lk)("div",C,[e[12]||(e[12]=(0,n.Lk)("label",{for:"exampleFormControlTextarea1",class:"form-label"},"위치, 시간, 내용을 자세히 입력해주세요.",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"6","onUpdate:modelValue":e[4]||(e[4]=t=>N.value=t)},null,512),[[o.Jo,N.value]])]),(0,n.Lk)("div",A,[(0,n.Lk)("button",{id:"updateButton",onClick:e[5]||(e[5]=t=>lt()),class:"btn btn-success fs-6 p-2"}," 등록하기 ")])])])])])]),B.value?((0,n.uX)(),(0,n.CE)("div",x,[(0,n.Lk)("div",K,[(0,n.Lk)("span",{class:"close",onClick:Z},"×"),(0,n.bo)((0,n.Lk)("input",{class:"mt-4","onUpdate:modelValue":e[6]||(e[6]=t=>F.value=t),placeholder:"장소 검색"},null,512),[[o.Jo,F.value]]),(0,n.Lk)("button",{onClick:z,class:"searchButton"},"검색하기"),J.value.length>0?((0,n.uX)(),(0,n.CE)("ul",R,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(J.value,((t,e)=>((0,n.uX)(),(0,n.CE)("li",{key:e,onClick:e=>tt(t)},(0,l.v_)(t.place_name)+" ("+(0,l.v_)(t.address_name)+") ",9,I)))),128))])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],64))}},P=a(1241);const E=(0,P.A)($,[["__scopeId","data-v-782e888f"]]);var M=E}}]);
//# sourceMappingURL=753.4ce1c45b.js.map