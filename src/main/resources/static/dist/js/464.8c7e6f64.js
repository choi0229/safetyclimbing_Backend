"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[464],{2464:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});a(4114);var l=a(6768),c=a(5130),o=a(144),n=a(1387),s=a(4373);const i={class:"container"},r={class:"form-check form-switch d-flex justify-content-end"},u={class:"form-check form-switch d-flex justify-content-end"},d={class:"mb-3"},m={class:"mb-3"},f={class:"mb-3 text-start"},k={class:"d-flex flex-column mb-3 fv-row text-start"};var p={__name:"WritePostView",setup(e){let t=localStorage.getItem("userId"),a=localStorage.getItem("userNickName");const p=(0,n.rd)(),v=(0,o.KR)(""),b=(0,o.KR)(""),L=(0,o.KR)(""),h=(0,o.KR)(!0);let y=0;const g=(0,o.KR)(!0);let x=0,w=0,C=0,S=(0,o.KR)(!1),K=null;const I=(0,o.KR)(null),N=e=>{I.value=e.target.files[0]},R=async()=>{if(!I.value)return null;const e=new FormData;e.append("file",I.value);try{const t=await s.A.post("/api/community/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}catch(t){return console.error("Error uploading image",t),null}},V=async()=>{if(!t)return console.error("유저 정보가 없습니다."),void alert("로그인 정보가 없습니다. 다시 로그인 해주세요.");y=1==h.value?1:0,x=1==g.value?1:0;const e=await R(),l={communityTitle:v.value,communityBody:b.value,communityUrl:e,userNickName:a,userId:t,longitude:C,latitude:w,publicState:y,safeState:x,courseName:L.value};try{await s.A.post("/api/community/add",l,{headers:{"Content-Type":"application/json"}}),p.push("/mobilecommunity")}catch(c){console.error("게시글 작성 실패:",c),alert("게시글 작성에 실패했습니다. 다시 시도해주세요.")}};function j(){const e=document.createElement("script");e.onload=()=>{kakao.maps.load((()=>{D(),S.value=!0}))},e.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=services",document.head.appendChild(e)}let U;function D(){const e=document.getElementById("map"),t={center:new kakao.maps.LatLng(37.57863386666,126.9595318940569),level:4};U=new kakao.maps.Map(e,t),K=new kakao.maps.Marker({position:U.getCenter()}),K.setMap(U),kakao.maps.event.addListener(U,"click",(function(e){const t=e.latLng;K.setPosition(t),w=t.getLat(),C=t.getLng(),document.getElementById("clickLatlng").innerHTML=`위도: ${t.getLat()}, 경도: ${t.getLng()}`}))}(0,l.sV)((()=>{j()}));const E=()=>{p.push({name:"mobilecommunity"})};return(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",{style:{"text-align":"left"}},[(0,l.Lk)("button",{class:"back-button ms-2 btn btn-success btn-sm mb-3 mt-3 ms-3 mx-2 custom-btn",onClick:E},"뒤로가기")]),(0,l.Lk)("div",i,[t[12]||(t[12]=(0,l.Lk)("div",{class:"d-flex justify-content-center"},[(0,l.Lk)("h2",null,"게시글 작성")],-1)),(0,l.Lk)("div",r,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefaultPublic","onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e)},null,512),[[c.lH,h.value]]),t[6]||(t[6]=(0,l.Lk)("label",{class:"form-check-label ms-2",for:"flexSwitchCheckDefaultPublic"},"공개 여부",-1))]),(0,l.Lk)("div",u,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefaultSafe","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e)},null,512),[[c.lH,g.value]]),t[7]||(t[7]=(0,l.Lk)("label",{class:"form-check-label ms-2",for:"flexSwitchCheckDefaultSafe"},"안전 게시글",-1))]),(0,l.Lk)("div",d,[t[8]||(t[8]=(0,l.Lk)("div",{class:"text-start"},[(0,l.Lk)("label",{for:"title",class:"form-label"},"제목")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),class:"form-control",required:""},null,512),[[c.Jo,v.value]])]),t[13]||(t[13]=(0,l.Fv)('<div class="mb-2" data-v-2ece6335><div id="map" class="map-container" data-v-2ece6335></div><div class="d-flex justify-content-center" data-v-2ece6335><p style="margin:0;" data-v-2ece6335><em data-v-2ece6335>지도를 클릭해주세요!</em></p></div><div id="clickLatlng" data-v-2ece6335></div></div>',1)),(0,l.Lk)("div",m,[t[9]||(t[9]=(0,l.Lk)("div",{class:"text-start"},[(0,l.Lk)("label",{for:"courseName",class:"form-label"},"코스 이름")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"courseName","onUpdate:modelValue":t[3]||(t[3]=e=>L.value=e),class:"form-control",required:""},null,512),[[c.Jo,L.value]])]),(0,l.Lk)("div",f,[t[10]||(t[10]=(0,l.Lk)("label",{for:"content",class:"form-label"},"내용",-1)),(0,l.bo)((0,l.Lk)("textarea",{id:"content","onUpdate:modelValue":t[4]||(t[4]=e=>b.value=e),class:"form-control",rows:"5",required:""},null,512),[[c.Jo,b.value]])]),(0,l.Lk)("div",k,[t[11]||(t[11]=(0,l.Lk)("label",{for:"image",class:"form-label"},"이미지 첨부",-1)),(0,l.Lk)("input",{type:"file",id:"image",class:"form-control",onChange:N,ref:"image",accept:"image/*"},null,544)]),(0,l.Lk)("button",{type:"submit",class:"btn btn-success",onClick:t[5]||(t[5]=e=>V())},"작성하기")])],64))}},v=a(1241);const b=(0,v.A)(p,[["__scopeId","data-v-2ece6335"]]);var L=b}}]);
//# sourceMappingURL=464.8c7e6f64.js.map