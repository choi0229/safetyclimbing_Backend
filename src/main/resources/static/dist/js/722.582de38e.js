"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[722],{246:function(t,a,e){e.d(a,{vJ:function(){return y},SH:function(){return d},px:function(){return i},sZ:function(){return l},jL:function(){return c},YG:function(){return m},yy:function(){return u},o2:function(){return v},lS:function(){return r},kl:function(){return g},Ob:function(){return f},t0:function(){return p},XG:function(){return h},lD:function(){return k},hc:function(){return L}});e(4114);var n=e(4373);function o(){const t=n.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}e(876);const s=o();async function l(){try{const t=await n.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(){try{const t=await n.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(t){try{const a=await n.A.get(`/api/complaint/mine/${t}`);return a.data}catch(a){console.error(a)}}async function c(t){try{const a=await n.A.get(`/api/complaint/myList/${t}`);return a.data}catch(a){console.error(a)}}async function u(){try{const t=await n.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const a=await n.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",a.status),console.log("민원글 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function d(t){try{const a=await n.A.get(`/api/complaint/one/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function g(t){try{const a=await n.A.get(`/api/userInfo/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function m(t){try{const a=await n.A.get(`/api/course/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function y(t){try{const a=await n.A.delete(`/api/complaint/delete/${t}`);return a.data}catch(a){console.error(a)}}async function k(t,a){try{const e=await n.A.patch(`/api/complaint/update/${t}`,a);return e.data}catch(e){console.error(e)}}async function f(t){try{const a=await s.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",a.data),a.data}catch(a){console.error(a)}}async function v(t){try{const a=await n.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function h(t){try{const a=await n.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",a.status),console.log("민원처리정보 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function L(t,a){try{const e=await n.A.patch(`/api/complaint/updateProcessing/${t}`,a);return e.data}catch(e){console.error(e)}}},6397:function(t,a,e){e.d(a,{A:function(){return i}});var n=e(6768);const o={id:"mobileFooter"};var s={__name:"MobileFooterView2",setup(t){function a(){window.location.href="/mobilemainview"}function e(){window.location.href="/mobilecourseview"}function s(){window.location.href="/mobilecommunity"}function l(){window.location.href="/complaintListMobile"}function r(){window.location.href="/record"}return(t,i)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:"footer-category",onClick:i[0]||(i[0]=t=>e()),style:{"margin-right":"10px"}},i[5]||(i[5]=[(0,n.Lk)("img",{src:"/images/코스2.gif",alt:"코스 아이콘",style:{filter:"hue-rotate(280deg)",width:"45px",height:"45px"}},null,-1),(0,n.Lk)("p",{style:{}},"코스",-1)])),(0,n.Lk)("div",{class:"footer-category",onClick:i[1]||(i[1]=t=>r()),style:{"margin-right":"10px"}},i[6]||(i[6]=[(0,n.Lk)("img",{src:"/images/HikingIcon.png",alt:"등산 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,n.Lk)("p",{style:{}},"등산",-1)])),(0,n.Lk)("div",{class:"footer-category home",onClick:i[2]||(i[2]=t=>a())},i[7]||(i[7]=[(0,n.Lk)("img",{src:"/images/홈.png",alt:"홈 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,n.Lk)("p",{style:{}},"홈",-1)])),(0,n.Lk)("div",{class:"footer-category",onClick:i[3]||(i[3]=t=>l()),style:{"margin-left":"10px"}},i[8]||(i[8]=[(0,n.Lk)("img",{src:"/images/위험신고.png",alt:"민원 신고 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,n.Lk)("p",{style:{}},"민원신고",-1)])),(0,n.Lk)("div",{class:"footer-category",onClick:i[4]||(i[4]=t=>s()),style:{"margin-left":"10px"}},i[9]||(i[9]=[(0,n.Lk)("img",{src:"/images/커뮤니티.png",alt:"커뮤니티 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,n.Lk)("div",{style:{margin:"0","font-size":"13px","line-height":"1.2","text-align":"center"}},"커뮤니티",-1)]))]))}},l=e(1241);const r=(0,l.A)(s,[["__scopeId","data-v-87fc62c8"]]);var i=r},6722:function(t,a,e){e.r(a),e.d(a,{default:function(){return X}});e(4114),e(7642),e(8004),e(3853),e(5876),e(2475),e(5024),e(1698);var n=e(6768),o=e(144),s=e(4232),l=e(6397),r=e(9126),i=e(1387),c=e(246);const u={id:"app"},p={class:"app-main"},d={class:"map-container"},g={class:"button-group2"},m={id:"map"},y={class:"card-container"},k=["onClick"],f={style:{"font-weight":"700"},class:"m-0"},v={style:{"font-size":"small"}},h={key:0,class:"mt-1",style:{"font-size":"small"}},L={style:{display:"inline-flex","align-items":"center"}},b={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},w={class:"modal-dialog modal-dialog-centered"},C={class:"modal-content p-0"},E={class:"modal-body pt-3 pb-3 ps-2 pe-2"},N={class:"comparison-table"},M={class:"stars"},x={key:0,class:"bi bi-star-half"};var _={__name:"CompareCourseView",setup(t){const a=(0,i.rd)(),e=()=>a.back(),_=()=>{F.value.forEach((t=>{if(R.value){const a=Math.min(...t.coordinates.map((t=>t.lat))),e=Math.min(...t.coordinates.map((t=>t.lng)));T.value.push(Math.max(...t.coordinates.map((t=>t.elevation))));const n=`\n      <div class="overlay-container" style="display: inline-block;">\n        <div class="label" style="background-color: white; padding: 4px 8px; border-radius: 8px; box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.15); color: black; font-size: 14px; text-align: center;">\n          <span class="center">${t.courseName}</span>\n        </div>\n      </div>\n    `,o=new kakao.maps.LatLng(a+.0015,e),s=new kakao.maps.CustomOverlay({position:o,content:n,zIndex:9999});s.setMap(R.value),console.log("오버레이 성공함")}else console.log("오버레이 실패함")}))};function I(){R.value?Y(R.value):console.log("Map is not ready yet.")}const A=(0,o.KR)([!0,!0]),X=t=>{A.value[t]=!A.value[t],A.value[t]?(I(),console.log("클릭 해제")):$(F.value[t])},R=(0,o.KR)(null),F=(0,o.KR)([]);let S=(0,o.KR)([]),K=(0,o.KR)([]),P=(0,o.KR)([]),T=(0,o.KR)([]);function $(t){const a=new kakao.maps.LatLngBounds;t.coordinates.forEach((t=>{a.extend(new kakao.maps.LatLng(t.lat,t.lng))})),R.value.setBounds(a)}async function O(){const t=JSON.parse(sessionStorage.getItem("selectedCourseIds")),a=await Promise.all(t.map((async t=>await(0,c.YG)(t))));S.value=a,console.log("코스데이터:",JSON.stringify(S.value[0],null,2)),j.value=S.value.map((t=>({fullStars:Math.floor(t.courseRate),halfStar:t.courseRate%1>=.5,emptyStars:5-Math.floor(t.courseRate)-(t.courseRate%1>=.5?1:0)})))}(0,n.sV)((async()=>{J(),await O()}));let j=(0,o.KR)([]);function J(){const t=document.createElement("script");t.onload=()=>{kakao.maps.load((()=>{G()}))},t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=clusterer,services",document.head.appendChild(t)}async function G(){R.value=new kakao.maps.Map(document.getElementById("map"),{center:new kakao.maps.LatLng(37.66433293993584,127.01160029114365),level:5}),await z("/data/인왕산ele copy.geojson"),await ot("/data/헬기장spot.geojson","/images/helipad.png"),await ot("/data/화장실.geojson","/images/toilets.png"),await ot("/data/2023산악사고_인왕산2.geojson","/images/danger.png"),K.value=await B("/data/2023산악사고_인왕산2.geojson",S)}async function z(t,a=R.value){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();console.log("GeoJSON data loaded:",n),W(n,a),_()}catch(e){console.error("GeoJSON 파일 로드 중 에러 발생:",e)}}async function B(t,a){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if(!n||!n.features)return console.error("Invalid GeoJSON data:",n),{};const o=a.value.map((t=>({courseName:t.courseName,mountainName:t.mountainName,typeCounts:{}})));return n.features.forEach((t=>{const{MNTN_NM:e,MNTN_NM2:n,type:s}=t.properties;a.value.forEach(((t,a)=>{t.mountainName===e&&t.courseName===n&&s&&(o[a].typeCounts[s]=(o[a].typeCounts[s]||0)+1)}))})),o.forEach((t=>{const a={},e=Object.keys(t.typeCounts).sort();P.value=[...new Set([...P.value,...e])].sort(),e.forEach((e=>{a[e]=t.typeCounts[e]})),t.typeCounts=a})),console.log("Incident Type Counts by Course:",o),console.log("typeList;",P.value),o}catch(e){return console.error("Error loading GeoJSON file:",e),[]}}function D(t){return"쉬움"==t?"green":"보통"==t?"orange":"red"}function H(t){let a=1/0;return K.value&&Array.isArray(K.value)&&K.value.forEach((e=>{const n=e.typeCounts&&void 0!==e.typeCounts[t]?e.typeCounts[t]:0;a=Math.min(a,n)})),a}function q(t,a){let e="orange",n=0;return K.value&&Array.isArray(K.value)&&K.value.forEach((t=>{t.typeCounts&&t.typeCounts[a]&&(n=Math.max(n,t.typeCounts[a]))})),K.value[0].typeCounts[a]!=K.value[1].typeCounts[a]&&n===t&&(e="red"),e}function W(t,a){F.value=S.value.map((t=>({courseName:t.courseName,coordinates:[]}))),t.features.forEach((t=>{S.value.forEach(((a,e)=>{if(t.properties.PMNTN_NM&&t.properties.PMNTN_NM.includes(a.courseName)){let a=[];"MultiLineString"===t.geometry.type?t.geometry.coordinates.forEach((e=>{a=a.concat(e.map((a=>({lng:a[0],lat:a[1],elevation:t.properties.DN||0}))))})):"LineString"===t.geometry.type&&(a=t.geometry.coordinates.map((a=>({lng:a[0],lat:a[1],elevation:t.properties.DN||0})))),F.value[e].coordinates.push(...a)}}))})),F.value.forEach((t=>{if(t.coordinates.length>0){const e=V(t.coordinates,5);U(e,a,t.courseName)}})),F.value.every((t=>0===t.coordinates.length))&&console.log("유효한 구간 데이터가 없습니다."),console.log("좌표나눈거"+JSON.stringify(F))}function V(t,a){const e=[];for(let n=0;n<t.length;n+=a)e.push(t.slice(n,n+a));return e}let Q=[];function U(t,a){const e=t.flat();Q.push(...e),Z(e),t.forEach((t=>{if(t.length>1){const a=t[0],e=t[t.length-1],n=at(a,e),o=nt(n),s=t.map((t=>new kakao.maps.LatLng(t.lat,t.lng))),l=new kakao.maps.Polyline({path:s,strokeWeight:5,strokeColor:o,strokeOpacity:.8,strokeStyle:"solid"});l.setMap(R.value)}})),Y(a)}function Y(t){const a=new kakao.maps.LatLngBounds;Q.forEach((t=>a.extend(new kakao.maps.LatLng(t.lat,t.lng)))),t.setBounds(a),setTimeout((()=>{t.panBy(0,80)}),200)}function Z(t){const a=t.map((t=>new kakao.maps.LatLng(t.lat,t.lng))),e=new kakao.maps.Polyline({path:a,strokeWeight:5,strokeColor:"#32CD32",strokeOpacity:1,strokeStyle:"solid"});e.setMap(R.value)}function tt(t,a){const e=6371e3,n=et(t.lat),o=et(a.lat),s=et(a.lat-t.lat),l=et(a.lng-t.lng),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(o)*Math.sin(l/2)*Math.sin(l/2),i=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return e*i}function at(t,a){const e=tt({lat:t.lat,lng:t.lng},{lat:a.lat,lng:a.lng}),n=a.elevation-t.elevation,o=Math.sqrt(Math.pow(e,2)+Math.pow(n,2));return e<1?0:n/o*100}function et(t){return t*(Math.PI/180)}function nt(t){return t>30?"#FF4500":t<-15?"#1E90FF":"#32CD32"}async function ot(t,a){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if(!n||!n.features)throw new Error("Invalid GeoJSON structure.");{const t=new kakao.maps.Size(35,45),e={offset:new kakao.maps.Point(12,35)},o=new kakao.maps.MarkerImage(a,t,e);n.features.forEach((t=>{const a=S.value.some((a=>a.courseName===t.properties.MNTN_NM2));if(a){const a=t.geometry.coordinates[1],e=t.geometry.coordinates[0],n=new kakao.maps.LatLng(a,e),s=new kakao.maps.Marker({position:n,map:R.value,title:t.properties.MNTN_NM2,image:o}),l=new kakao.maps.InfoWindow({content:`<img src="/images/${t.properties.image}" alt="사진" style="width: 150px; height: 100px;"/><br><div style="padding:5px;">${t.properties.MNTN_NM2}<br>${t.properties.SAFE_SPOT2}</div>`});kakao.maps.event.addListener(s,"click",(()=>{l.getMap()?l.close():l.open(R.value,s)}))}}))}}catch(e){console.error(`${t} 파일 로드 중 에러 발생:`,e)}}return(t,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",u,[(0,n.bF)(r.A),(0,n.Lk)("div",p,[(0,n.Lk)("div",d,[(0,n.Lk)("div",{class:"button-group"},[(0,n.Lk)("button",{class:"button-item",onClick:e,style:{"border-radius":"50%",height:"40px",width:"40px"}},a[1]||(a[1]=[(0,n.Lk)("img",{src:"/images/뒤로가기.png",alt:"뒤로가기 아이콘",width:"24",height:"24"},null,-1)]))]),(0,n.Lk)("div",g,[(0,n.Lk)("button",{class:"button-item",onClick:a[0]||(a[0]=t=>I()),style:{"border-radius":"50%",height:"40px",width:"40px"}},a[2]||(a[2]=[(0,n.Lk)("i",{class:"bi bi-eye-fill"},null,-1)]))]),a[3]||(a[3]=(0,n.Fv)('<div class="button-group3" data-v-8baea560><button class="button-item" style="border-radius:50%;height:40px;width:40px;" data-bs-toggle="modal" data-bs-target="#exampleModal" data-v-8baea560><i class="bi bi-question-lg" data-v-8baea560></i></button></div><div class="map-legend ms-4" data-v-8baea560><div class="legend-item" data-v-8baea560><div class="legend-icon" style="background-color:#FF4500;" data-v-8baea560></div><span data-v-8baea560>오르막</span></div><div class="legend-item" data-v-8baea560><div class="legend-icon" style="background-color:#32CD32;" data-v-8baea560></div><span data-v-8baea560>평지</span></div><div class="legend-item" data-v-8baea560><div class="legend-icon" style="background-color:#1E90FF;" data-v-8baea560></div><span data-v-8baea560>내리막</span></div></div>',2)),(0,n.Lk)("div",m,[(0,n.Lk)("div",y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(S),((t,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,s.C4)(["card",{clicked:A.value[a]}]),onClick:t=>X(a)},[(0,n.Lk)("span",null,(0,s.v_)(t.mountainName),1),(0,n.Lk)("h4",f,(0,s.v_)(t.courseName)+"코스",1),(0,n.Lk)("span",v,(0,s.v_)(t.distance)+" | "+(0,s.v_)(t.duration),1),(0,o.R1)(K)[a]?.typeCounts?((0,n.uX)(),(0,n.CE)("span",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(K)[a].typeCounts,((t,a)=>((0,n.uX)(),(0,n.CE)("span",{class:"m-0",key:a,style:{display:"block","margin-bottom":"5px"}},[(0,n.Lk)("span",L,[(0,n.eW)((0,s.v_)(a)+" : "+(0,s.v_)(t)+" ",1),(0,n.Lk)("div",{class:"bar",style:(0,s.Tr)({width:20*t+"px",backgroundColor:q(t,a)})},null,4)])])))),128))])):(0,n.Q3)("",!0)],10,k)))),128))])])])]),(0,n.bF)(l.A)]),(0,n.Lk)("div",b,[(0,n.Lk)("div",w,[(0,n.Lk)("div",C,[(0,n.Lk)("div",E,[(0,n.Lk)("table",N,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[a[4]||(a[4]=(0,n.Lk)("th",null,"코스",-1)),(0,n.Lk)("th",null,(0,s.v_)((0,o.R1)(S)[0]?.courseName)+"코스",1),(0,n.Lk)("th",null,(0,s.v_)((0,o.R1)(S)[1]?.courseName)+"코스",1)])]),(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[a[5]||(a[5]=(0,n.Lk)("th",null,"산 이름",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(S),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:"mountainName-"+a},(0,s.v_)(t.mountainName),1)))),128))]),(0,n.Lk)("tr",null,[a[6]||(a[6]=(0,n.Lk)("th",null,"총 거리",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(S),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:"distance-"+a},(0,s.v_)(t.distance),1)))),128))]),(0,n.Lk)("tr",null,[a[7]||(a[7]=(0,n.Lk)("th",null,"난이도",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(S),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:"distance-"+a,style:(0,s.Tr)({color:D(t.courseLevel)})},(0,s.v_)(t.courseLevel),5)))),128))]),(0,n.Lk)("tr",null,[a[8]||(a[8]=(0,n.Lk)("th",null,"후기",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(j),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:a},[(0,n.Lk)("div",M,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.fullStars,(t=>((0,n.uX)(),(0,n.CE)("i",{class:(0,s.C4)("bi bi-star-fill"),key:"full-"+t+"-"+a})))),128)),t.halfStar?((0,n.uX)(),(0,n.CE)("i",x)):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.emptyStars,(t=>((0,n.uX)(),(0,n.CE)("i",{class:"bi bi-star",key:"empty-"+t+"-"+a})))),128))])])))),128))]),(0,n.Lk)("tr",null,[a[9]||(a[9]=(0,n.Lk)("th",null,"최고 고도",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(T),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:"elevation-"+a},(0,s.v_)(t)+"m ",1)))),128))]),(0,n.Lk)("tr",null,[a[10]||(a[10]=(0,n.Lk)("th",null,"예상 소요 시간",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(S),((t,a)=>((0,n.uX)(),(0,n.CE)("td",{key:"estimatedTime-"+a},(0,s.v_)(t.duration),1)))),128))]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(P),(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("th",null,(0,s.v_)(t),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(K),((a,e)=>((0,n.uX)(),(0,n.CE)("td",{key:e,style:(0,s.Tr)({color:(void 0===a.typeCounts[t]?0:a.typeCounts[t])===H(t)?"black":"red"})},(0,s.v_)(a.typeCounts[t]||0)+"건 ",5)))),128))])))),128))])])])])])])],64))}},I=e(1241);const A=(0,I.A)(_,[["__scopeId","data-v-8baea560"]]);var X=A}}]);
//# sourceMappingURL=722.582de38e.js.map