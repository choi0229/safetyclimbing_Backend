"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[517],{246:function(t,e,a){a.d(e,{vJ:function(){return f},SH:function(){return p},px:function(){return r},sZ:function(){return c},jL:function(){return i},YG:function(){return g},yy:function(){return u},o2:function(){return L},lS:function(){return l},kl:function(){return m},Ob:function(){return k},t0:function(){return d},XG:function(){return b},lD:function(){return v},hc:function(){return y}});a(4114);var n=a(4373);function o(){const t=n.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}a(876);const s=o();async function c(){try{const t=await n.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function l(){try{const t=await n.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(t){try{const e=await n.A.get(`/api/complaint/mine/${t}`);return e.data}catch(e){console.error(e)}}async function i(t){try{const e=await n.A.get(`/api/complaint/myList/${t}`);return e.data}catch(e){console.error(e)}}async function u(){try{const t=await n.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function d(t){try{const e=await n.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",e.status),console.log("민원글 작성에 대한 응답 데이터:",e.data),e.data}catch(e){throw console.error("API 요청 중 오류 발생:",e),e}}async function p(t){try{const e=await n.A.get(`/api/complaint/one/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function m(t){try{const e=await n.A.get(`/api/userInfo/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function g(t){try{const e=await n.A.get(`/api/course/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function f(t){try{const e=await n.A.delete(`/api/complaint/delete/${t}`);return e.data}catch(e){console.error(e)}}async function v(t,e){try{const a=await n.A.patch(`/api/complaint/update/${t}`,e);return a.data}catch(a){console.error(a)}}async function k(t){try{const e=await s.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",e.data),e.data}catch(e){console.error(e)}}async function L(t){try{const e=await n.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",e),e.data}catch(e){console.error(e)}}async function b(t){try{const e=await n.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",e.status),console.log("민원처리정보 작성에 대한 응답 데이터:",e.data),e.data}catch(e){throw console.error("API 요청 중 오류 발생:",e),e}}async function y(t,e){try{const a=await n.A.patch(`/api/complaint/updateProcessing/${t}`,e);return a.data}catch(a){console.error(a)}}},7517:function(t,e,a){a.r(e),a.d(e,{default:function(){return W}});var n=a(6768),o=a(4232),s=a(144),c=a(5130),l=a(876),r=a(246),i=a(8077),u=a(4373);const d={class:"container"},p={class:"card"},m={class:"card-body p-lg-5 pb-lg-0"},g={class:"d-flex flex-column flex-md-row"},f={class:"flex-md-grow-1 me-md-4"},v={class:"mb-2"},k={class:"d-flex flex-wrap mb-3 align-items-center"},L={class:"mb-3 mt-4"},b={class:"container table-container"},y={class:"row"},h={class:"col-10 table-cell"},w={class:"row"},x={class:"col-4 table-cell"},A={class:"col-4 table-cell"},C={class:"row"},R={class:"col-10 table-cell"},I={class:"row lastrow mb-2"},_={class:"col-10 table-cell"},P={class:"mb-5 mt-5"},$={class:"container table-container"},j={class:"row"},K={class:"col-10 table-cell"},S={class:"row lastrow mb-2"},T={class:"col-10 table-cell"},U={class:"d-flex justify-content-center align-items-center"},q={class:"col-5 image-container mb-2 d-flex justify-content-center position-relative"},D=["src"],E={class:"col-5 image-container mb-2 d-flex justify-content-center"},N=["src"],V={class:"mb-4"},X={class:"modal fade",id:"processing_update",tabindex:"-1","aria-hidden":"true"},F={class:"modal-dialog modal-dialog-centered"},J={class:"modal-content rounded"},G={class:"modal-body scroll-y px-10 px-lg-15 pt-0 pb-15"},H={id:"kt_modal_new_target_form",class:"form"},M={class:"d-flex flex-column mb-8 fv-row mt-3"},O={class:"d-flex flex-column mb-8 fv-row"},Y={class:"d-flex flex-column mb-8 fv-row"},Z={class:"text-center mt-3"};var z={__name:"ManageInfoView",setup(t){let e=0;(0,n.sV)((async()=>{e=sessionStorage.getItem("complaintNo"),await W(e)}));let a,z=(0,s.KR)({}),B=(0,s.KR)({}),Q="";async function W(t){try{const e=await(0,r.SH)(t);z.value=e,console.log("민원 가져온거",z.value);const a=await(0,r.o2)(t);B.value=a,console.log("민원처리정보 가져온거",B.value),Q=localStorage.getItem("userInstitution")}catch(e){console.error("민원글을 가져오는 중 오류 발생:",e)}}const tt=(0,s.KR)(""),et=(0,s.KR)("");function at(){window.scrollTo({top:0,behavior:"smooth"}),et.value=B.value.processingContent,tt.value=B.value.processor;const t=document.querySelector("#processing_update");a=new i.aF(t),a.show()}async function nt(t,e){e.preventDefault(),console.log("Update processing triggered");let n=await ct();null==n&&(n=B.value.processingImg);const o={processingContent:et.value,processor:tt.value,processingComplaintNo:t,processingImg:n||""};B.value.processingContent=et.value,B.value.processor=tt.value,B.value.processingImg=n,(0,r.hc)(t,o),a.hide()}const ot=(0,s.KR)(null),st=t=>{ot.value=t.target.files[0]},ct=async()=>{if(!ot.value)return null;const t=new FormData;t.append("file",ot.value);try{const e=await u.A.post("/api/complaint/upload",t,{headers:{"Content-Type":"multipart/form-data"}});return e.data}catch(e){return console.error("Error uploading image",e),null}};function lt(){l.A.replace({path:"/manageList"})}function rt(){console.log("실행"),Q.trim().toLowerCase()===z.value.institution.trim().toLowerCase()?l.A.replace({path:"/processing"}):alert("담당 업무만 처리가능합니다!")}return(t,e)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",g,[(0,n.Lk)("div",f,[(0,n.Lk)("div",v,[(0,n.Lk)("div",k,[(0,n.Lk)("button",{class:"styled-button",onClick:e[0]||(e[0]=t=>lt())},"뒤로가기")]),(0,n.Lk)("div",L,[e[12]||(e[12]=(0,n.Lk)("h1",{class:"text-gray-900 fs-4 mb-3"}," 위험신고내용 ",-1)),(0,n.Lk)("div",b,[(0,n.Lk)("div",y,[e[7]||(e[7]=(0,n.Lk)("div",{class:"col-2 table-header"}," 제목 ",-1)),(0,n.Lk)("div",h,(0,o.v_)((0,s.R1)(z).complaintTitle),1)]),(0,n.Lk)("div",w,[e[8]||(e[8]=(0,n.Lk)("div",{class:"col-2 table-header"}," 신고일시 ",-1)),(0,n.Lk)("div",x,(0,o.v_)((0,s.R1)(z).createdAt),1),e[9]||(e[9]=(0,n.Lk)("div",{class:"col-2 table-header"}," 신고유형 ",-1)),(0,n.Lk)("div",A,(0,o.v_)((0,s.R1)(z).complaintType),1)]),(0,n.Lk)("div",C,[e[10]||(e[10]=(0,n.Lk)("div",{class:"col-2 table-header"}," 산이름 ",-1)),(0,n.Lk)("div",R,(0,o.v_)((0,s.R1)(z).mountainName),1)]),(0,n.Lk)("div",I,[e[11]||(e[11]=(0,n.Lk)("div",{class:"col-2 table-header"}," 내용 ",-1)),(0,n.Lk)("div",_,(0,o.v_)((0,s.R1)(z).complaintContent),1)])])]),(0,n.Lk)("div",P,[e[15]||(e[15]=(0,n.Lk)("h1",{class:"text-gray-900 fs-4 mb-3"}," 처리결과 ",-1)),(0,n.Lk)("div",$,[(0,n.Lk)("div",j,[e[13]||(e[13]=(0,n.Lk)("div",{class:"col-2 table-header"}," 처리내용 ",-1)),(0,n.Lk)("div",K,(0,o.v_)((0,s.R1)(B)?.processingContent?(0,s.R1)(B).processingContent:"처리전입니다."),1)]),(0,n.Lk)("div",S,[e[14]||(e[14]=(0,n.Lk)("div",{class:"col-2 table-header"}," 처리기관 ",-1)),(0,n.Lk)("div",T,(0,o.v_)((0,s.R1)(B)?.processor?(0,s.R1)(B).processor:"처리전입니다."),1)])])]),(0,n.Lk)("div",U,[(0,n.Lk)("div",q,[(0,n.Lk)("img",{src:(0,s.R1)(z).complaintImg,alt:"Complaint Image",class:"img-fluid"},null,8,D),e[16]||(e[16]=(0,n.Lk)("div",{class:"triangle"},[(0,n.Lk)("span",{class:"triangle-text"},"전")],-1))]),e[18]||(e[18]=(0,n.Lk)("div",{class:"col-1 ms-1"},[(0,n.Lk)("i",{class:"bi bi-chevron-double-right fs-1 ms-4",style:{color:"gray"}})],-1)),(0,n.Lk)("div",E,[(0,n.Lk)("img",{src:(0,s.R1)(B)?.processingImg?(0,s.R1)(B).processingImg:"/images/normal.png",alt:"Processing Image",class:"img-fluid"},null,8,N),e[17]||(e[17]=(0,n.Lk)("div",{class:"triangle2"},[(0,n.Lk)("span",{class:"triangle-text"},"후")],-1))])]),e[19]||(e[19]=(0,n.Lk)("hr",{class:"separator-line mt-5 mb-4"},null,-1)),(0,n.Lk)("div",V,[(0,s.R1)(B)?.processingContent?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"styled-button2 me-2",onClick:e[2]||(e[2]=t=>at())}," 처리결과수정하기 ")):((0,n.uX)(),(0,n.CE)("button",{key:0,class:"styled-button2 me-2",onClick:e[1]||(e[1]=t=>rt())}," 처리결과등록하기"))])])])])])])]),(0,n.Lk)("div",X,[(0,n.Lk)("div",F,[(0,n.Lk)("div",J,[e[24]||(e[24]=(0,n.Lk)("div",{class:"modal-header pb-0 border-0 justify-content-end"},[(0,n.Lk)("div",{class:"","data-bs-dismiss":"modal"},[(0,n.Lk)("button",{class:"btn btn-sm btn-success"},"닫기")])],-1)),(0,n.Lk)("div",G,[(0,n.Lk)("form",H,[e[23]||(e[23]=(0,n.Lk)("div",{class:"mb-8 text-center"},[(0,n.Lk)("h1",{class:"mb-4"},"처리결과 수정"),(0,n.Lk)("div",{class:"text-muted fs-6"},"내용, 결과, 이미지를 수정하세요.")],-1)),(0,n.Lk)("div",M,[e[20]||(e[20]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"처리내용")],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control form-control-solid",name:"target_content","onUpdate:modelValue":e[3]||(e[3]=t=>et.value=t)},null,512),[[c.Jo,et.value]])]),(0,n.Lk)("div",O,[e[21]||(e[21]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"처리기관")],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control form-control-solid",name:"target_processor","onUpdate:modelValue":e[4]||(e[4]=t=>tt.value=t)},null,512),[[c.Jo,tt.value]])]),(0,n.Lk)("div",Y,[e[22]||(e[22]=(0,n.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,n.Lk)("span",{class:"required"},"처리 후 파일 선택")],-1)),(0,n.Lk)("input",{type:"file",id:"image",onChange:st,ref:"image"},null,544)]),(0,n.Lk)("div",Z,[(0,n.Lk)("button",{type:"button",class:"btn btn-success",onClick:e[5]||(e[5]=(0,c.D$)((t=>nt((0,s.R1)(B).processingComplaintNo,t)),["prevent"]))},"저장"),(0,n.Lk)("button",{type:"reset",class:"btn btn-light ms-3",onClick:e[6]||(e[6]=e=>t.clearAll())},"모두 지우기")])])])])])])],64))}},B=a(1241);const Q=(0,B.A)(z,[["__scopeId","data-v-4f7a1a3d"]]);var W=Q}}]);
//# sourceMappingURL=517.c77da638.js.map