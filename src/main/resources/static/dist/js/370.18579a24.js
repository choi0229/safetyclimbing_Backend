"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[370],{3370:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});t(4114);var n=t(6768),o=t(4232),l=t(144),s=t(1387);const r={class:"course-preview-page"},u={class:"video-container"},c=["src"];var i={__name:"MobileCoursePreview",setup(e){const a=(0,s.lq)(),t=(0,s.rd)(),i=(0,l.KR)(JSON.parse(a.query.course)),p=(0,l.KR)(null),d=(0,l.KR)(null),v=(0,l.KR)([]),k=(0,l.KR)(null),m=(0,l.KR)(!1),f=()=>t.back();function g(){return new Promise(((e,a)=>{if(window.kakao&&window.kakao.maps)e();else{const t=document.createElement("script");t.onload=()=>kakao.maps.load(e),t.onerror=a,t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false",document.head.appendChild(t)}}))}async function h(){await(0,n.dY)();const e=document.getElementById("smallMap");if(!e)return void console.error("smallMap 요소를 찾을 수 없습니다.");d.value=new kakao.maps.Map(e,{center:new kakao.maps.LatLng(37.66433293993584,127.01160029114365),level:5});const a="/data/인왕산ele copy.geojson";await w(a,d.value)}async function w(e,a){try{const t=await fetch(e),n=await t.json();let o=[],l=!1;if(n.features.forEach((e=>{e.properties.PMNTN_NM.includes(i.value.courseName)&&(l=!0,"MultiLineString"===e.geometry.type?e.geometry.coordinates.forEach((a=>{a.forEach((a=>{const t=new kakao.maps.LatLng(a[1],a[0]);o.push(t),v.value.push({lat:a[1],lng:a[0],elevation:e.properties.DN||0})}))})):"LineString"===e.geometry.type&&e.geometry.coordinates.forEach((a=>{const t=new kakao.maps.LatLng(a[1],a[0]);o.push(t),v.value.push({lat:a[1],lng:a[0],elevation:e.properties.DN||0})})))})),l&&o.length>0){const e=new kakao.maps.Polyline({path:o,strokeWeight:5,strokeColor:"#FF0000",strokeOpacity:.8});e.setMap(a);const t=new kakao.maps.LatLngBounds;o.forEach((e=>t.extend(e))),a.setBounds(t),a.setLevel(a.getLevel()-2)}else console.warn("일치하는 코스가 없거나 유효한 좌표가 없습니다.")}catch(t){console.error("GeoJSON 파일 로드 중 에러 발생:",t)}}function L(e){if(!d.value||!v.value.length)return;const a=e.target.currentTime,t=e.target.duration,n=a/t,o=Math.floor(n*v.value.length);y(o)}function y(e){if(e>=0&&e<v.value.length&&d.value){const a=v.value[e];k.value&&k.value.setMap(null),k.value=new kakao.maps.Marker({position:new kakao.maps.LatLng(a.lat,a.lng),map:d.value}),d.value.panTo(new kakao.maps.LatLng(a.lat,a.lng))}}function M(){if(m.value=!m.value,m.value&&v.value.length>0){const e=Math.floor(v.value.length/2),a=v.value[e];a&&(d.value.setCenter(new kakao.maps.LatLng(a.lat,a.lng)),d.value.setLevel(3))}else d.value.setLevel(5)}return(0,n.sV)((async()=>{await g(),await h()})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("button",{onClick:f,class:"back-button"},a[0]||(a[0]=[(0,n.Lk)("img",{src:"/images/뒤로가기.png",alt:"뒤로가기"},null,-1)])),(0,n.Lk)("div",u,[(0,n.Lk)("video",{ref_key:"videoRef",ref:p,controls:"",autoplay:"",muted:"",onTimeupdate:L,class:"video-player"},[(0,n.Lk)("source",{src:i.value.courseVideo,type:"video/mp4"},null,8,c),a[1]||(a[1]=(0,n.eW)(" 브라우저가 비디오 태그를 지원하지 않습니다. "))],544),(0,n.Lk)("div",{id:"smallMap",class:(0,o.C4)(["small-map",{"expanded-map":m.value}]),onClick:M},null,2)])]))}},p=t(1241);const d=(0,p.A)(i,[["__scopeId","data-v-194d385e"]]);var v=d}}]);
//# sourceMappingURL=370.18579a24.js.map