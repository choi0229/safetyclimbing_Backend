"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[814],{246:function(t,n,a){a.d(n,{vJ:function(){return m},SH:function(){return d},px:function(){return i},sZ:function(){return o},jL:function(){return r},YG:function(){return v},yy:function(){return u},o2:function(){return h},lS:function(){return l},kl:function(){return f},Ob:function(){return y},t0:function(){return p},XG:function(){return k},lD:function(){return g},hc:function(){return L}});a(4114);var e=a(4373);function c(){const t=e.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}a(876);const s=c();async function o(){try{const t=await e.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function l(){try{const t=await e.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(t){try{const n=await e.A.get(`/api/complaint/mine/${t}`);return n.data}catch(n){console.error(n)}}async function r(t){try{const n=await e.A.get(`/api/complaint/myList/${t}`);return n.data}catch(n){console.error(n)}}async function u(){try{const t=await e.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const n=await e.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",n.status),console.log("민원글 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function d(t){try{const n=await e.A.get(`/api/complaint/one/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function f(t){try{const n=await e.A.get(`/api/userInfo/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function v(t){try{const n=await e.A.get(`/api/course/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function m(t){try{const n=await e.A.delete(`/api/complaint/delete/${t}`);return n.data}catch(n){console.error(n)}}async function g(t,n){try{const a=await e.A.patch(`/api/complaint/update/${t}`,n);return a.data}catch(a){console.error(a)}}async function y(t){try{const n=await s.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",n.data),n.data}catch(n){console.error(n)}}async function h(t){try{const n=await e.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function k(t){try{const n=await e.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",n.status),console.log("민원처리정보 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function L(t,n){try{const a=await e.A.patch(`/api/complaint/updateProcessing/${t}`,n);return a.data}catch(a){console.error(a)}}},6687:function(t,n,a){a.d(n,{$h:function(){return l},T_:function(){return u},aj:function(){return r},ec:function(){return i},ok:function(){return p},wK:function(){return o}});var e=a(144),c=a(5234),s=a(246);const o=(0,c.nY)("complaintlist",(()=>{const t=(0,e.KR)([]);async function n(){console.log("Fetching complaintlist ==="),t.value=await(0,s.sZ)(),console.log("postlist--",t.value)}return{complaintlist:t,fetchComplaintList:n}})),l=(0,c.nY)("recentcomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(){t.value=await(0,s.lS)()}return{recentcomplaintlist:t,fetchRecentComplaintList:n}})),i=(0,c.nY)("mycomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(n){t.value=await(0,s.px)(n)}return{mycomplaintlist:t,fetchMyComplaintList:n}})),r=(0,c.nY)("managingcomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(n){t.value=await(0,s.jL)(n),console.log("담당업무--",t.value)}return{managingcomplaintlist:t,fetchManagingComplaintList:n}})),u=(0,c.nY)("pathList",(()=>{const t=(0,e.KR)([]);async function n(){t.value=await(0,s.yy)()}return{pathList:t,fetchPathList:n}})),p=(0,c.nY)("complaintByNo",(()=>{const t=(0,e.KR)({});async function n(n){try{t.value=await(0,s.SH)(n)}catch(a){console.error("Error fetching post:",a)}}return{complaintone:t,fetchComplaintone:n}}));(0,c.nY)("userpostlist",(()=>{const t=(0,e.KR)([]);async function n(){const n=sessionStorage.getItem("userNo");if(console.log(n),n)try{console.log("userpostlist -- 유저 포스트 리스트"),t.value=await(0,s.Ob)(n),console.log("userpostlist--",t.value)}catch(a){console.error("Error fetching userpostlist:",a)}else console.error("userNo is undefined or null")}return{userpostlist:t,fetchUserPost:n}}))},3814:function(t,n,a){a.r(n),a.d(n,{default:function(){return M}});var e=a(6768),c=a(4232),s=a(144),o=a(7007),l=a(6687),i=a(876),r=a(5234);const u={style:{"margin-left":"240px"}},p={style:{"margin-left":"20px"}},d={class:"d-flex justify-content-center"},f={class:"h-300px d-flex align-items-center justify-content-center mt-4 mb-4",style:{width:"2000px"}},v={class:"col-9"},m={class:"card card-flush",id:"kt_contacts_list"},g={class:"card-header d-flex flex-column align-items-center pb-2"},y={class:"row w-100"},h={class:"col d-flex justify-content-start"},k={class:"card-body pt-3 pb-4",id:"kt_contacts_list_body"},L={class:"row"},w={class:"col-1 text-center"},b={class:"text-muted fs-7"},x={class:"col-1 d-flex justify-content-center"},C={class:"col-5"},A=["onClick"],_={class:"col-3 d-flex justify-content-center"},P={class:"ms-3",style:{"white-space":"nowrap"}},R={class:"col-2 text-center"},I={class:"text-muted fs-7"},K={class:"card-footer d-flex justify-content-center",style:{height:"55px"}},j={"aria-label":"Page navigation example"},$={class:"pagination"},E=["onClick"],S=10;var Y={__name:"ManageListView",setup(t){const n=(0,s.KR)(!1);let a=(0,s.KR)("담당신고보기");const Y=(0,l.wK)(),N=(0,l.$h)(),F=(0,l.aj)();(0,e.sV)((async()=>{await X()}));let M=localStorage.getItem("userInstitution");async function X(){await Y.fetchComplaintList(),await N.fetchRecentComplaintList(),await F.fetchManagingComplaintList(M)}console.log("로그인한사람담당과:",M);const{complaintlist:T}=(0,r.bP)(Y),{recentcomplaintlist:G}=(0,r.bP)(N),{managingcomplaintlist:U}=(0,r.bP)(F),W=(0,e.EW)((()=>n.value?U.value:G.value));function H(){n.value=!n.value,a=n.value?"전체보기":"담당신고보기"}const J=(0,l.ok)();(0,r.bP)(J);async function O(t){await J.fetchComplaintone(t),sessionStorage.setItem("complaintNo",t),i.A.replace({path:"/manageInfo"})}function V(){i.A.replace({path:"/heatmap"})}const Z=(0,s.KR)(1),z=(0,e.EW)((()=>{const t=(Z.value-1)*S,n=t+S;return W.value.slice(t,n)})),B=(0,e.EW)((()=>Math.ceil(W.value.length/S)));function D(t){t>=1&&t<=B.value&&(Z.value=t)}return(t,n)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(o.A,{style:{"z-index":"4",width:"100%"}}),n[8]||(n[8]=(0,e.Lk)("div",{class:"image-container mb-2"},[(0,e.Lk)("img",{src:"/images/mount3.JPG",alt:"Mountains",class:"background-img"}),(0,e.Lk)("h2",{class:"align-to-card"},"등산로 위험 신고 목록")],-1)),(0,e.Lk)("span",u,"총 : "+(0,c.v_)(W.value.length)+"건",1),(0,e.Lk)("span",p,"현재 : "+(0,c.v_)(Z.value)+"/"+(0,c.v_)(B.value)+"페이지",1),(0,e.Lk)("div",d,[(0,e.Lk)("div",f,[(0,e.Lk)("div",v,[(0,e.Lk)("div",m,[(0,e.Lk)("div",g,[(0,e.Lk)("div",y,[(0,e.Lk)("div",h,[(0,e.Lk)("button",{class:"btn btn-success btn-sm fw-bold",onClick:n[0]||(n[0]=t=>H())},(0,c.v_)((0,s.R1)(a)),1)]),(0,e.Lk)("div",{class:"col d-flex justify-content-end"},[(0,e.Lk)("button",{type:"button",class:"btn btn-success btn-sm fw-bold",onClick:V},"히트맵")])])]),n[7]||(n[7]=(0,e.Lk)("div",{class:"separator separator-dashed m-1"},null,-1)),(0,e.Lk)("div",k,[n[4]||(n[4]=(0,e.Fv)('<div class="container" data-v-c8d16090><div class="row" data-v-c8d16090><div class="col-1 text-center" data-v-c8d16090><span class="text-muted fs-7" data-v-c8d16090>번호</span></div><div class="col-1 text-center" data-v-c8d16090></div><div class="col-5 text-center" data-v-c8d16090><span class="" style="white-space:nowrap;" data-v-c8d16090>제목</span></div><div class="col-3 text-center" data-v-c8d16090><span class="" style="white-space:nowrap;" data-v-c8d16090>담당</span></div><div class="col-2 text-center" data-v-c8d16090><span class="text-muted fs-7" data-v-c8d16090>신고일</span></div><hr data-v-c8d16090></div></div>',1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(z.value,((t,a)=>((0,e.uX)(),(0,e.CE)("div",{key:t.complaintNo,class:"container mb-2"},[(0,e.Lk)("div",L,[(0,e.Lk)("div",w,[(0,e.Lk)("span",b,(0,c.v_)(W.value.length-(Z.value-1)*S-a),1)]),(0,e.Lk)("div",x,[(0,e.Lk)("span",{class:"rounded-box",style:(0,c.Tr)("미처리"===t.complaintState?{color:"red",borderColor:"red"}:{})},(0,c.v_)(t.complaintState),5)]),(0,e.Lk)("div",C,[(0,e.Lk)("span",{class:"ms-3",style:{"white-space":"nowrap"},onClick:n=>O(t.complaintNo)},(0,c.v_)(t.complaintTitle),9,A)]),(0,e.Lk)("div",_,[(0,e.Lk)("span",P,(0,c.v_)(t.institution),1)]),(0,e.Lk)("div",R,[(0,e.Lk)("span",I,(0,c.v_)(t.createdAt.split(" ")[0]),1)]),n[3]||(n[3]=(0,e.Lk)("hr",null,null,-1))])])))),128))]),(0,e.Lk)("div",K,[(0,e.Lk)("nav",j,[(0,e.Lk)("ul",$,[(0,e.Lk)("li",{class:(0,c.C4)(["page-item",{disabled:1===Z.value}])},[(0,e.Lk)("button",{class:"page-link",onClick:n[1]||(n[1]=t=>D(Z.value-1)),"aria-label":"Previous"},n[5]||(n[5]=[(0,e.Lk)("span",{"aria-hidden":"true"},"«",-1)]))],2),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(B.value,(t=>((0,e.uX)(),(0,e.CE)("li",{key:t,class:(0,c.C4)(["page-item",{active:Z.value===t}])},[(0,e.Lk)("button",{class:"page-link",onClick:n=>D(t)},(0,c.v_)(t),9,E)],2)))),128)),(0,e.Lk)("li",{class:(0,c.C4)(["page-item",{disabled:Z.value===B.value}])},[(0,e.Lk)("button",{class:"page-link",onClick:n[2]||(n[2]=t=>D(Z.value+1)),"aria-label":"Next"},n[6]||(n[6]=[(0,e.Lk)("span",{"aria-hidden":"true"},"»",-1)]))],2)])])])])])])])],64))}},N=a(1241);const F=(0,N.A)(Y,[["__scopeId","data-v-c8d16090"]]);var M=F}}]);
//# sourceMappingURL=814.f421a405.js.map