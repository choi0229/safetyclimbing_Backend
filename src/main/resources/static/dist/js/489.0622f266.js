"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[489],{6489:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});a(4114);var n=a(6768),o=a(144),s=a(6591),r=a(4373);const i={id:"app"};var l={__name:"MountainDetailView2",setup(t){const e=(0,o.KR)(null),a=(0,o.KR)([]);let l=null;const c=(0,o.KR)(null);function p(){const t=document.createElement("script");t.onload=()=>kakao.maps.load((()=>{e.value=new kakao.maps.Map(document.getElementById("map"),{center:new kakao.maps.LatLng(37.66433293993584,127.01160029114365),level:5}),u("/data/인왕산ele copy.geojson"),d("/data/헬기장spot.geojson","/images/helipad.png"),d("/data/벤치spot.geojson","/images/bench.png"),d("/data/2023산악사고_인왕산.geojson","/images/danger.png")})),t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false",document.head.appendChild(t)}async function u(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();h(a)}catch(e){console.error("GeoJSON 파일 로드 중 에러 발생:",e)}}async function d(t,a){try{const n=await fetch(t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=await n.json();console.log(`${t} 마커 데이터 로드 성공:`,o);const s=o.features.filter((t=>(b.value=t.properties.MNTN_NM,"북한산_백운대"==b.value))),r=new kakao.maps.Size(35,45),i={offset:new kakao.maps.Point(12,35)},l=new kakao.maps.MarkerImage(a,r,i);s.forEach((t=>{const a=t.geometry.coordinates[1],n=t.geometry.coordinates[0],o=new kakao.maps.LatLng(a,n),s=new kakao.maps.Marker({position:o,map:e.value,title:t.properties.MNTN_NM,image:l}),r=new kakao.maps.InfoWindow({content:`<div style="padding:5px;">${t.properties.MNTN_NM}<br>${t.properties.SAFE_SPOT2}</div>`});kakao.maps.event.addListener(s,"mouseover",(()=>r.open(e.value,s))),kakao.maps.event.addListener(s,"mouseout",(()=>r.close()))}))}catch(n){console.error(`${t} 파일 로드 중 에러 발생:`,n)}}function m(t,e){const a=[];for(let n=0;n<t.length;n+=e)a.push(t.slice(n,n+e));return a}function g(t){return t>30?"#FF4500":t<-15?"#1E90FF":"#32CD32"}function h(t){let e=[];if(t.features.forEach((t=>{if(t.properties.PMNTN_NM&&t.properties.PMNTN_NM.includes("")){let n=[];"MultiLineString"===t.geometry.type?t.geometry.coordinates.forEach((e=>{n=n.concat(e.map((e=>({lng:e[0],lat:e[1],elevation:t.properties.DN||0}))))})):"LineString"===t.geometry.type&&(n=t.geometry.coordinates.map((e=>({lng:e[0],lat:e[1],elevation:t.properties.DN||0})))),a.value=e,e=e.concat(n)}})),e.length>0){const t=m(e,7);k(t),x(e)}else console.log("유효한 구간 데이터가 없습니다.")}function k(t){const a=t.flat();f(a),t.forEach((t=>{if(t.length>1){const a=t[0],n=t[t.length-1],o=w(a,n),s=g(o),r=t.map((t=>new kakao.maps.LatLng(t.lat,t.lng))),i=new kakao.maps.Polyline({path:r,strokeWeight:5,strokeColor:s,strokeOpacity:.8,strokeStyle:"solid"});i.setMap(e.value)}}));const n=new kakao.maps.LatLngBounds;t.flat().forEach((t=>n.extend(new kakao.maps.LatLng(t.lat,t.lng)))),e.value.setBounds(n)}function f(t){const a=t.map((t=>new kakao.maps.LatLng(t.lat,t.lng))),n=new kakao.maps.Polyline({path:a,strokeWeight:5,strokeColor:"#32CD32",strokeOpacity:1,strokeStyle:"solid"});n.setMap(e.value)}function v(t,e,a){if(0===t)return 0;const n=a[t-1],o=6371,s=y(e[1]-n[1]),r=y(e[0]-n[0]),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(y(n[1]))*Math.cos(y(e[1]))*Math.sin(r/2)*Math.sin(r/2),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return o*l}function M(t,e){const a=6371e3,n=y(t.lat),o=y(e.lat),s=y(e.lat-t.lat),r=y(e.lng-t.lng),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(o)*Math.sin(r/2)*Math.sin(r/2),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return a*l}function w(t,e){const a=M({lat:t.lat,lng:t.lng},{lat:e.lat,lng:e.lng}),n=e.elevation-t.elevation,o=Math.sqrt(Math.pow(a,2)+Math.pow(n,2));return a<1?0:n/o*100}function y(t){return t*(Math.PI/180)}function x(t){const e=document.getElementById("elevationChart").getContext("2d"),a=L(t.map((t=>[t.lng,t.lat]))),n=a[a.length-1],o=645/n,r=a.map((t=>t*o)),i=t.map((t=>t.elevation));l&&(l.destroy(),l=null),l=new s.Ay(e,{type:"line",data:{labels:r,datasets:[{label:"고도 (m)",data:i,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1}]},options:{scales:{x:{title:{display:!0,text:"거리 (m)"},ticks:{autoSkip:!0,maxTicksLimit:10,maxRotation:0,minRotation:0,callback:function(t){return t.toFixed(2)+" m"}}},y:{title:{display:!0,text:"고도 (m)"}}},interaction:{mode:"index",intersect:!1},plugins:{tooltip:{enabled:!1}},onClick:(t,e)=>{if(e.length>0){const t=e[0].index;T(t)}},onHover:(t,e)=>{if(e.length>0){const t=e[0].index;T(t)}}}})}function L(t){let e=[],a=0;for(let n=0;n<t.length;n++)n>0&&(a+=v(n,t[n],t)),e.push(a);return e}function T(t){if(t>=0&&t<a.value.length){const n=a.value[t];console.log("마우스 오버 인덱스:",t),console.log("해당 좌표:",n),c.value&&c.value.setMap(null),c.value=new kakao.maps.Marker({position:new kakao.maps.LatLng(n.lat,n.lng)}),c.value.setMap(e.value),e.value.panTo(new kakao.maps.LatLng(n.lat,n.lng))}else console.error(`Invalid index: ${t}`)}(0,n.sV)((()=>{p(),C(37.66433293993584,127.01160029114365)}));const b=(0,o.KR)(""),N=(0,o.KR)([]),E=(0,o.KR)([]),$=(0,o.KR)([]),C=async(t,e)=>{try{const a="5c48577c775896e979e7bcc3b225b730",n=await r.A.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${e}&appid=${a}`);console.log(n.data);const o={};n.data.list.forEach((t=>{const e=t.dt_txt.split(" ")[0];o[e]||(o[e]=[]),o[e].push(t)}));const s=[];Object.keys(o).forEach((t=>{const{currentTemp:e,minTemp:a,maxTemp:n}=_(o[t]),r={date:t,currentTemp:e,minTemp:a,maxTemp:n,...o[t][0]};s.push(r)})),N.value=s;const i=N.value.map((a=>r.A.get(`https://api.sunrise-sunset.org/json?lat=${t}&lng=${e}&date=${a.date}&formatted=0`))),l=await Promise.all(i);E.value=l.map((t=>S(t.data.results.sunrise))),$.value=l.map((t=>S(t.data.results.sunset)))}catch(a){console.error("Error fetching weather data:",a)}},_=t=>{const e=t.map((t=>t.main.temp)),a=t[0].main.temp,n=Math.min(...e),o=Math.max(...e);return{currentTemp:a,minTemp:n,maxTemp:o}},S=t=>{const e=new Date(t);return e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Seoul"})};return(t,e)=>{const a=(0,n.g2)("HeaderView");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(a,{style:{"z-index":"4",width:"1920px"}}),e[0]||(e[0]=(0,n.Lk)("div",{class:"d-flex"},[(0,n.Lk)("div",{class:"row",style:{margin:"0px",padding:"0px"}},[(0,n.Lk)("div",{id:"map",style:{width:"100%",height:"680px",margin:"0px"}}),(0,n.Lk)("canvas",{id:"elevationChart",width:"400px",height:"100px"})])],-1))])}}},c=a(1241);const p=(0,c.A)(l,[["__scopeId","data-v-6976e944"]]);var u=p},6591:function(t,e,a){var n=a(6912);n.t1.register(...n.$L),e.Ay=n.t1}}]);
//# sourceMappingURL=489.0622f266.js.map