"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[832],{246:function(t,n,a){a.d(n,{vJ:function(){return g},SH:function(){return d},px:function(){return r},sZ:function(){return s},jL:function(){return l},YG:function(){return f},yy:function(){return u},o2:function(){return y},lS:function(){return i},kl:function(){return m},Ob:function(){return h},t0:function(){return p},XG:function(){return k},lD:function(){return v},hc:function(){return L}});a(4114);var o=a(4373);function e(){const t=o.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}a(876);const c=e();async function s(){try{const t=await o.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(){try{const t=await o.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(t){try{const n=await o.A.get(`/api/complaint/mine/${t}`);return n.data}catch(n){console.error(n)}}async function l(t){try{const n=await o.A.get(`/api/complaint/myList/${t}`);return n.data}catch(n){console.error(n)}}async function u(){try{const t=await o.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const n=await o.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",n.status),console.log("민원글 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function d(t){try{const n=await o.A.get(`/api/complaint/one/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function m(t){try{const n=await o.A.get(`/api/userInfo/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function f(t){try{const n=await o.A.get(`/api/course/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function g(t){try{const n=await o.A.delete(`/api/complaint/delete/${t}`);return n.data}catch(n){console.error(n)}}async function v(t,n){try{const a=await o.A.patch(`/api/complaint/update/${t}`,n);return a.data}catch(a){console.error(a)}}async function h(t){try{const n=await c.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",n.data),n.data}catch(n){console.error(n)}}async function y(t){try{const n=await o.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function k(t){try{const n=await o.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",n.status),console.log("민원처리정보 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function L(t,n){try{const a=await o.A.patch(`/api/complaint/updateProcessing/${t}`,n);return a.data}catch(a){console.error(a)}}},6687:function(t,n,a){a.d(n,{$h:function(){return i},T_:function(){return u},aj:function(){return l},ec:function(){return r},ok:function(){return p},wK:function(){return s}});var o=a(144),e=a(5234),c=a(246);const s=(0,e.nY)("complaintlist",(()=>{const t=(0,o.KR)([]);async function n(){console.log("Fetching complaintlist ==="),t.value=await(0,c.sZ)(),console.log("postlist--",t.value)}return{complaintlist:t,fetchComplaintList:n}})),i=(0,e.nY)("recentcomplaintlist",(()=>{const t=(0,o.KR)([]);async function n(){t.value=await(0,c.lS)()}return{recentcomplaintlist:t,fetchRecentComplaintList:n}})),r=(0,e.nY)("mycomplaintlist",(()=>{const t=(0,o.KR)([]);async function n(n){t.value=await(0,c.px)(n)}return{mycomplaintlist:t,fetchMyComplaintList:n}})),l=(0,e.nY)("managingcomplaintlist",(()=>{const t=(0,o.KR)([]);async function n(n){t.value=await(0,c.jL)(n),console.log("담당업무--",t.value)}return{managingcomplaintlist:t,fetchManagingComplaintList:n}})),u=(0,e.nY)("pathList",(()=>{const t=(0,o.KR)([]);async function n(){t.value=await(0,c.yy)()}return{pathList:t,fetchPathList:n}})),p=(0,e.nY)("complaintByNo",(()=>{const t=(0,o.KR)({});async function n(n){try{t.value=await(0,c.SH)(n)}catch(a){console.error("Error fetching post:",a)}}return{complaintone:t,fetchComplaintone:n}}));(0,e.nY)("userpostlist",(()=>{const t=(0,o.KR)([]);async function n(){const n=sessionStorage.getItem("userNo");if(console.log(n),n)try{console.log("userpostlist -- 유저 포스트 리스트"),t.value=await(0,c.Ob)(n),console.log("userpostlist--",t.value)}catch(a){console.error("Error fetching userpostlist:",a)}else console.error("userNo is undefined or null")}return{userpostlist:t,fetchUserPost:n}}))},832:function(t,n,a){a.r(n),a.d(n,{default:function(){return N}});a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var o=a(6768),e=a(4232),c=a(144),s=a(5130),i=a(2492),r=a(6687),l=a(246),u=a(876),p=a(5234);const d={id:"app"},m={class:"custom-header"},f={class:"app-main"},g={class:"button-group-container",style:{"border-bottom":"solid 1px #45a049"}},v={class:"button-group"},h={class:"card-container d-flex align-items-center justify-content-center mt-3 mb-4"},y={class:"col-12 col-md-9"},k={class:"card-body",id:"kt_contacts_list_body",style:{height:"520px"}},L=["onClick"],w={class:"post-header"},b={class:"post-number"},C={class:"post-title"},A={class:"post-meta"},x={class:"author"},I={class:"time"},R={class:"pagination-container"},P={"aria-label":"Pagination"},K={class:"pagination"},_=["onClick"],$=7;var S={__name:"ComplaintListViewMobile",setup(t){const n=(0,r.wK)(),a=(0,r.$h)(),S=(0,r.ec)(),E=(0,c.KR)(!1);let M=(0,c.KR)("나의 민원"),N=localStorage.getItem("userId");const Y=(0,c.KR)({}),W=(0,c.KR)(1);(0,o.sV)((async()=>{await n.fetchComplaintList(),await a.fetchRecentComplaintList(),await S.fetchMyComplaintList(N);const t=sessionStorage.getItem("hasRefreshed");t?sessionStorage.removeItem("hasRefreshed"):(sessionStorage.setItem("hasRefreshed","true"),window.location.reload());const o=[...new Set(T.value.map((t=>t.userId)))];await Promise.all(o.map((async t=>{const n=await(0,l.kl)(t);Y.value[t]=n.userNickName})))}));const{complaintlist:X}=(0,p.bP)(n),{recentcomplaintlist:j}=(0,p.bP)(a),{mycomplaintlist:F}=(0,p.bP)(S),T=(0,o.EW)((()=>E.value?F.value:j.value)),U=(0,o.EW)((()=>{const t=(W.value-1)*$,n=t+$;return T.value.slice(t,n)})),V=(0,o.EW)((()=>Math.ceil(T.value.length/$)));function D(t){t>=1&&t<=V.value&&(W.value=t)}function G(){E.value=!E.value,M=E.value?"전체글":"나의 민원"}function H(t){return t.split(" ")[0]}function O(t){return t.split(" ")[1]}const Z=(0,r.ok)();(0,p.bP)(Z);async function B(t){await Z.fetchComplaintone(t),sessionStorage.setItem("complaintNo",t),u.A.replace({path:"/complaintInfoMobile"})}function J(){u.A.replace({path:"/complaintMobile"})}function q(){u.A.replace({path:"/clMapMobile"})}function z(){window.location.href="/mobilemainview"}return(0,o.sV)((()=>{W.value=1})),(t,n)=>((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"back-button",onClick:z},n[4]||(n[4]=[(0,o.Lk)("img",{src:"/images/뒤로가기.png",alt:"뒤로가기"},null,-1)])),n[5]||(n[5]=(0,o.Lk)("span",{class:"header-title"},"민원신고",-1)),(0,o.Lk)("button",{class:"done-button",onClick:n[0]||(n[0]=n=>t.submitPost())},"완료")]),(0,o.Lk)("div",f,[(0,o.Lk)("div",g,[(0,o.Lk)("div",v,[(0,o.Lk)("button",{class:(0,e.C4)({active:E.value}),onClick:n[1]||(n[1]=t=>G())},[n[6]||(n[6]=(0,o.Lk)("img",{src:"/images/나의민원.png",width:"16",height:"auto",style:{"margin-right":"7px","margin-bottom":"4px"}},null,-1)),(0,o.eW)((0,e.v_)((0,c.R1)(M)),1)],2),(0,o.Lk)("button",{class:(0,e.C4)({active:!E.value&&2===W.value}),onClick:n[2]||(n[2]=t=>q())},n[7]||(n[7]=[(0,o.Lk)("img",{src:"/images/지도.png",width:"16",height:"auto",style:{"margin-right":"7px","margin-bottom":"4px"}},null,-1),(0,o.eW)("지도보기")]),2),(0,o.Lk)("button",{class:(0,e.C4)({active:3===W.value}),onClick:n[3]||(n[3]=t=>J())},n[8]||(n[8]=[(0,o.Lk)("img",{src:"/images/신고.png",width:"16",height:"auto",style:{"margin-right":"7px","margin-bottom":"4px"}},null,-1),(0,o.eW)("신고하기")]),2)])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",y,[(0,o.Lk)("div",k,[n[11]||(n[11]=(0,o.Fv)('<div class="container" data-v-c2651fcc><div class="row" style="flex-wrap:nowrap;" data-v-c2651fcc><div class="col-2 col-md-2 text-center" data-v-c2651fcc><span class="text-muted fs-9" style="border-bottom:solid 1px #444;padding-bottom:3px;display:inline-block;" data-v-c2651fcc>번호</span></div><div class="col-5 text-center" style="margin-left:0px;" data-v-c2651fcc><span class="text-muted fs-9" style="border-bottom:solid 1px #444;padding-bottom:3px;display:inline-block;" data-v-c2651fcc>제목</span></div></div><hr class="separator-line" data-v-c2651fcc></div>',1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(U.value,((t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:t.complaintNo,class:"post-container"},[(0,o.Lk)("div",{class:"post-content",onClick:n=>B(t.complaintNo)},[(0,o.Lk)("div",w,[(0,o.Lk)("span",b,(0,e.v_)((W.value-1)*$+a+1),1),n[9]||(n[9]=(0,o.Lk)("span",{class:"separator"},null,-1)),(0,o.Lk)("span",C,(0,e.v_)(t.complaintTitle),1)]),(0,o.Lk)("div",A,[(0,o.Lk)("span",x,(0,e.v_)(Y.value[t.userId]||"..."),1),n[10]||(n[10]=(0,o.Lk)("span",{class:"separator"},"|",-1)),(0,o.Lk)("span",I,(0,e.v_)(H(t.createdAt))+" | "+(0,e.v_)(O(t.createdAt)),1)])],8,L)])))),128))])])])]),(0,o.Lk)("div",R,[(0,o.Lk)("nav",P,[(0,o.Lk)("ul",K,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(V.value,(t=>((0,o.uX)(),(0,o.CE)("li",{class:(0,e.C4)(["page-item",{active:t===W.value,hover:t===W.value}]),key:t},[(0,o.Lk)("a",{class:"page-link",onClick:(0,s.D$)((n=>D(t)),["prevent"])},(0,e.v_)(t),9,_)],2)))),128))])])]),(0,o.bF)(i.A)]))}},E=a(1241);const M=(0,E.A)(S,[["__scopeId","data-v-c2651fcc"]]);var N=M}}]);
//# sourceMappingURL=832.4bdecbb5.js.map