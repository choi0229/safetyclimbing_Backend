"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[768],{8768:function(a,e,s){s.r(e),s.d(e,{default:function(){return Q}});var l=s(6768),t=s(4232),i=s(5130),r=s(144),n=s(4373);const u={class:"review-summary"},v={class:"rating-summary"},c={class:"average-rating"},o={class:"rating-display"},d={class:"rating-number"},k={class:"review-ai-summary"},p={class:"review-page"},L={class:"content-wrapper"},g={class:"summary-section"},w={class:"rating"},C={class:"stars"},b={key:0,class:"bi bi-star-half"},f={class:"rating-breakdown"},h={class:"progress-bar"},m={class:"reviews-section"},y={class:"review-search"},E={class:"reviews-list-wrapper"},K={class:"reviews-list",ref:"reviewsList"},X={class:"card review-card"},_={class:"review-content-wrapper"},I={class:"review-header"},F=["src"],R={class:"user-info"},S={class:"stars-inline"},M={class:"review-date"},W={class:"review-content"},$={class:"review-photos"},A=["src"],D={class:"difficulty"};var x={__name:"MountainView",setup(a){const e=(0,r.KR)(0),s=(0,r.KR)(""),x=(0,r.KR)([]),U=(0,r.KR)({}),V=(0,r.KR)(0),Q=(0,r.KR)(""),T=(0,r.KR)(3),j=async()=>{try{const a=await n.A.get("/api/course/1/reviews");console.log(a.data.reviews),x.value=a.data.reviews||[],U.value=a.data.ratingDistribution||{},V.value=a.data.reviewCount||0,a.data.averageRating&&(e.value=a.data.averageRating.toFixed(1))}catch(a){console.error("리뷰 데이터를 가져오는 데 실패했습니다:",a)}},z=async()=>{try{const a=await n.A.get("/api/course/1/summarize");s.value=a.data.summary||"요약된 내용 없음"}catch(a){console.error("리뷰 요약 데이터를 가져오는 데 실패했습니다:",a)}};(0,l.sV)((()=>{j(),z()}));const H=(0,l.EW)((()=>Math.floor(e.value))),J=(0,l.EW)((()=>e.value%1>=.5)),P=(0,l.EW)((()=>5-H.value-(J.value?1:0))),Y=(0,l.EW)((()=>x.value.filter((a=>{const e=a?.reviewContent||"",s=a?.userId||"";return e.toLowerCase().includes(Q.value.toLowerCase())||s.toLowerCase().includes(Q.value.toLowerCase())})))),q=(0,l.EW)((()=>Y.value.slice(0,T.value))),B=()=>{T.value+3<=Y.value.length?T.value+=3:T.value=Y.value.length},G=(0,l.EW)((()=>T.value<Y.value.length)),N=a=>{const e=new Date(a),s=540,l=new Date(e.getTime()+60*s*1e3),t=l.getFullYear(),i=(l.getMonth()+1).toString().padStart(2,"0"),r=l.getDate().toString().padStart(2,"0"),n=l.getHours().toString().padStart(2,"0"),u=l.getMinutes().toString().padStart(2,"0");return`${t}-${i}-${r} ${n}:${u}`};return(a,r)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",u,[(0,l.Lk)("div",v,[r[3]||(r[3]=(0,l.Lk)("h2",null,"산와봤니 방문객들은 이렇게 말합니다.",-1)),(0,l.Lk)("div",c,[(0,l.Lk)("div",o,[(0,l.Lk)("span",d,(0,t.v_)(e.value),1),r[1]||(r[1]=(0,l.Lk)("span",{class:"rating-star"},[(0,l.Lk)("i",{class:"bi bi-star-fill"})],-1))]),r[2]||(r[2]=(0,l.Lk)("p",{class:"rating-text"},"평균 별점",-1))])]),(0,l.Lk)("div",k,[(0,l.Lk)("p",null,(0,t.v_)(s.value),1),r[4]||(r[4]=(0,l.Lk)("small",null,"이 요약은 AI가 트레일 리뷰를 토대로 생성한 것이므로 항상 완벽하지는 않습니다.",-1))])]),(0,l.Lk)("div",p,[(0,l.Lk)("div",L,[(0,l.Lk)("div",g,[(0,l.Lk)("div",w,[(0,l.Lk)("h1",null,(0,t.v_)(e.value),1),(0,l.Lk)("div",C,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(H.value,(a=>((0,l.uX)(),(0,l.CE)("i",{class:(0,t.C4)("bi bi-star-fill"),key:a})))),128)),J.value?((0,l.uX)(),(0,l.CE)("i",b)):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(P.value,(a=>((0,l.uX)(),(0,l.CE)("i",{class:"bi bi-star",key:a})))),128))]),(0,l.Lk)("p",null,(0,t.v_)(V.value)+"개의 리뷰",1)]),(0,l.Lk)("div",f,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(U.value,((a,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"rating-bar"},[(0,l.Lk)("span",null,(0,t.v_)(e)+"점",1),r[5]||(r[5]=(0,l.Lk)("i",{class:"bi bi-star-fill"},null,-1)),(0,l.Lk)("div",h,[(0,l.Lk)("div",{class:"progress",style:(0,t.Tr)({width:a/V.value*100+"%"})},null,4)])])))),128))])]),(0,l.Lk)("div",m,[(0,l.Lk)("div",y,[(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"리뷰 검색","onUpdate:modelValue":r[0]||(r[0]=a=>Q.value=a)},null,512),[[i.Jo,Q.value]])]),(0,l.Lk)("div",E,[(0,l.Lk)("div",K,[(0,l.Lk)("div",X,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(q.value,((a,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"review-item"},[(0,l.Lk)("div",_,[(0,l.Lk)("div",I,[(0,l.Lk)("img",{class:"profile-image",src:a.profileImage||"/images/main1.jpg",alt:"Profile Image"},null,8,F),(0,l.Lk)("div",R,[(0,l.Lk)("h3",null,(0,t.v_)(a?.userId||"Unknown User"),1),(0,l.Lk)("div",S,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(5,(e=>(0,l.Lk)("i",{class:(0,t.C4)({"bi bi-star-fill":e<=Math.floor(a.rating),"bi bi-star-half":e===Math.ceil(a.rating)&&a.rating%1>=.5,"bi bi-star":e>Math.ceil(a.rating)}),key:e},null,2))),64))]),(0,l.Lk)("span",M,(0,t.v_)(N(a?.date)||"날짜 없음"),1)])]),(0,l.Lk)("p",W,(0,t.v_)(a?.reviewContent||"내용 없음"),1),(0,l.Lk)("div",$,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a?.photos,(a=>((0,l.uX)(),(0,l.CE)("img",{src:a,key:a,alt:"리뷰 사진",class:"review-photo"},null,8,A)))),128))]),(0,l.Lk)("span",D,"난이도: "+(0,t.v_)(a?.difficulty||"정보 없음"),1)])])))),128))]),G.value?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:B}," 더 보기 ")):(0,l.Q3)("",!0)],512)])])])])],64))}},U=s(1241);const V=(0,U.A)(x,[["__scopeId","data-v-006d3105"]]);var Q=V}}]);
//# sourceMappingURL=768.5dc29536.js.map