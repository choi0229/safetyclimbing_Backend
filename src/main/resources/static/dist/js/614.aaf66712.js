"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[614],{4165:function(e,t,a){a.d(t,{A:function(){return c}});var o=a(6768);const n={id:"mobileFooter"};var l={__name:"MobileFooterView5",setup(e){function t(){window.location.href="/mobilemainview"}function a(){window.location.href="/mobilecourseview"}function l(){window.location.href="/mobilecommunity"}function s(){window.location.href="/complaintListMobile"}function i(){window.location.href="/record"}return(e,c)=>((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",{class:"footer-category",onClick:c[0]||(c[0]=e=>a()),style:{"margin-right":"10px"}},c[5]||(c[5]=[(0,o.Lk)("img",{src:"/images/코스2.png",alt:"코스 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"코스",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:c[1]||(c[1]=e=>i()),style:{"margin-right":"10px"}},c[6]||(c[6]=[(0,o.Lk)("img",{src:"/images/HikingIcon.png",alt:"등산 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"등산",-1)])),(0,o.Lk)("div",{class:"footer-category home",onClick:c[2]||(c[2]=e=>t())},c[7]||(c[7]=[(0,o.Lk)("img",{src:"/images/홈.png",alt:"홈 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"홈",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:c[3]||(c[3]=e=>s()),style:{"margin-left":"10px"}},c[8]||(c[8]=[(0,o.Lk)("img",{src:"/images/위험신고.png",alt:"민원 신고 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"민원신고",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:c[4]||(c[4]=e=>l()),style:{"margin-left":"10px"}},c[9]||(c[9]=[(0,o.Lk)("img",{src:"/images/커뮤니티.gif",alt:"커뮤니티 아이콘",style:{filter:"hue-rotate(280deg)",width:"45px",height:"45px"}},null,-1),(0,o.Lk)("div",{style:{margin:"0","font-size":"13px","line-height":"1.2","text-align":"center","font-family":"'TheJamsil4Bold'","font-weight":"500"}},"커뮤니티",-1)]))]))}},s=a(1241);const i=(0,s.A)(l,[["__scopeId","data-v-7aa484b0"]]);var c=i},3614:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});a(4114);var o=a(6768),n=a(5130),l=a(4232),s=a(9126),i=a(4165),c=a(144),r=a(4373),u=a(876);const m={class:"container"},d={class:"switch-container"},g={class:"switch"},p={class:"slider"},k={class:"switch-text"},y={class:"content"},v={class:"col-md-12"},h={class:"write-button-container fixed-button-container"},f={class:"scrollable-content"},w={class:"community-item"},L={class:"d-flex align-items-center",style:{padding:"6px"}},C={class:"text-muted",id:"userNickName",style:{margin:"2px"}},b={class:"image-map-container"},x=["src","onClick"],N=["id","onClick"],E={class:"d-flex align-items-center",style:{"border-bottom":"solid 1px black"}},M={class:"d-flex justify-content-between align-items-center",id:"my-container"},_=["onClick"],A={class:"like-count ms-2",style:{"margin-right":"5px"}},P={class:"comment-count ms-2"},I={class:"date-overlay",id:"communityRegDate"},R={style:{"margin-bottom":"15px",padding:"5px"}},D={id:"userNickName2"},X=["onClick"],K=["onClick"];var B={__name:"MobileCommunityView",setup(e){const t=(0,c.KR)([]),a=(0,c.KR)({}),B=(0,c.KR)(""),F=(0,c.KR)({}),O=(0,c.KR)([]),V=(0,c.KR)(!1),$=(0,c.KR)("photo"),j=()=>{V.value?T():S()},S=async()=>{try{await G(),V.value=!1,await(0,o.dY)(),t.value.forEach((e=>{q(e.courseName,e.communityPk,e.lat,e.lng)}))}catch(e){console.error(e)}},T=async()=>{try{const e=await r.A.post("/api/safeList");t.value=e.data.map((e=>({...e,showMap:!0,likes:e.likes||0,commentCount:e.commentCount||0,courseName:e.courseName,lat:e.lat||e.latitude,lng:e.lng||e.longitude}))),await(0,o.dY)(),t.value.forEach((e=>{q(e.courseName,e.communityPk,e.lat,e.lng)})),V.value=!0}catch(e){console.error("Error during safe list loading:",e)}},Y=(0,o.EW)((()=>t.value.filter((e=>e.communityBody.includes(B.value)||e.userNickName.includes(B.value))))),z=()=>{u.A.push({path:"/writePost"})},H=e=>{u.A.push({path:"/communityDetailView",query:{community:JSON.stringify(e)}})};function J(e,t,o){const n=document.getElementById(e);if(!n)return void console.error(`Element with ID ${e} not found`);const l={center:new kakao.maps.LatLng(t,o),level:6},s=new kakao.maps.Map(n,l);return a.value[e]=s,s}const Q=async e=>{try{const t=await r.A.post("/api/course/byName",{courseName:e});O.value=t.data,u.A.push({name:"mobilemountaindetailview",query:{course:JSON.stringify(O.value),mapType:$.value}})}catch(t){console.error("Error during like or navigation:",t)}},U=async()=>{try{const e=await r.A.get("/data/인왕산ele copy.geojson"),t=e.data;t.features.forEach((e=>{const t=e.properties.PMNTN_NM,a=e.geometry.coordinates.reduce(((e,t)=>e.concat(t.map((e=>({lat:e[1],lng:e[0]}))))),[]);F.value[t]||(F.value[t]=[]),F.value[t].push(...a)})),console.log("Course Data Loaded:",F.value)}catch(e){console.error("GeoJSON 데이터를 불러오는 중 오류 발생:",e)}},q=(e,t,o,n)=>{const l=`map-${t}`;W(l);const s=Object.keys(F.value).find((t=>t.includes(e)));if(!s)return void console.error(`Coordinates not found for course: ${e}`);const i=F.value[s],c=i.map((e=>new kakao.maps.LatLng(e.lat,e.lng)));let r=a.value[l];if(r||(r=J(l,o,n)),r){const e=new kakao.maps.Polyline({path:c,strokeWeight:5,strokeColor:"#00FF00",strokeOpacity:.8,strokeStyle:"solid"});e.setMap(r),console.log(`Polyline set for course: ${s}`,e.getPath())}else console.error(`Map not found for map ID: ${l}`)};function W(e){const t=a.value[e];t&&(t.removeOverlayMapTypeId(kakao.maps.MapTypeId.POLYLINE),a.value[e]=null)}(0,o.sV)((async()=>{const e=document.createElement("script");e.onload=async()=>{kakao.maps.load((async()=>{await U(),await G(),await(0,o.dY)(),t.value.forEach((e=>{q(e.courseName,e.communityPk,e.lat,e.lng)}))}))},e.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false",document.head.appendChild(e)}));const G=async()=>{try{const e=await r.A.get("/api/communityList");t.value=e.data.map((e=>({...e,showMap:!0,likes:e.likes||0,commentCount:e.commentCount||0,courseName:e.courseName,lat:e.lat||e.latitude,lng:e.lng||e.longitude}))),Y.value=t.value,t.value.sort(((e,t)=>new Date(t.communityRegDate)-new Date(e.communityRegDate))),await(0,o.dY)(),t.value.forEach((e=>{const t=`map-${e.communityPk}`;J(t,e.lat,e.lng)})),console.log(t.value)}catch(e){console.error(e)}},Z=async e=>{try{const a=localStorage.getItem("userId");if(!a)return void console.log("User not logged in");const o=await r.A.post("/api/like",{userId:a,communityPk:e});t.value=o.data.map((e=>({...e,showMap:!0,likes:e.likes||0,commentCount:e.commentCount||0,lat:e.lat||e.latitude,lng:e.lng||e.longitude})))}catch(a){console.log("Error liking the post:",a)}};return(e,a)=>((0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)(s.A,{class:"header"}),(0,o.Lk)("div",d,[(0,o.Lk)("label",g,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),onChange:j},null,544),[[n.lH,V.value]]),(0,o.Lk)("span",p,[(0,o.Lk)("span",k,(0,l.v_)(V.value?"안전":"게시판"),1)])])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",v,[(0,o.Lk)("div",h,[(0,o.Lk)("button",{class:"btn btn-lg custom-btn2",onClick:a[1]||(a[1]=e=>z())},a[2]||(a[2]=[(0,o.Lk)("img",{src:"/images/글쓰기.png",width:"35px",height:"auto"},null,-1)]))]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.communityPk,class:"card shadow-sm"},[(0,o.Lk)("div",f,[(0,o.Lk)("div",w,[(0,o.Lk)("div",L,[a[3]||(a[3]=(0,o.Lk)("img",{src:"/images/profile.png",alt:"프로필 사진",class:"profile-image"},null,-1)),(0,o.Lk)("p",C,(0,l.v_)(t.userNickName),1)]),(0,o.Lk)("div",b,[t.communityUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:t.communityUrl,alt:"게시글 이미지",class:"img-fluid",style:{width:"500px",height:"225px","object-fit":"cover"},onClick:e=>H(t)},null,8,x)):(0,o.Q3)("",!0),t.showMap?((0,o.uX)(),(0,o.CE)("div",{key:1,id:"map-"+t.communityPk,class:"map-overlay",onClick:e=>Q(t.courseName),style:{cursor:"pointer"}},null,8,N)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",E,[(0,o.Lk)("div",M,[((0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",fill:"currentColor",style:{"margin-left":"15px"},class:(0,l.C4)(["bi bi-heart like-icon",{liked:t.liked}]),onClick:e=>Z(t.communityPk),viewBox:"0 0 16 16"},[(0,o.Lk)("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 \r\n                      6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 \r\n                      2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15",class:(0,l.C4)({"text-danger":t.liked})},null,2)],10,_)),(0,o.Lk)("span",A,(0,l.v_)(t.likes),1),a[4]||(a[4]=(0,o.Lk)("span",{class:"comment-icon ms-2"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",fill:"currentColor",class:"bi bi-chat-left-dots",viewBox:"0 0 16 16"},[(0,o.Lk)("path",{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,o.Lk)("path",{d:"M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})])],-1)),(0,o.Lk)("span",P,(0,l.v_)(t.commentCount),1),a[5]||(a[5]=(0,o.Lk)("span",null,[(0,o.Lk)("img",{src:"/images/공유.png",style:{width:"18px",height:"18px","margin-left":"10px","margin-bottom":"1px"}})],-1)),(0,o.Lk)("span",I,(0,l.v_)(t.communityRegDate),1)])]),(0,o.Lk)("div",R,[(0,o.Lk)("span",D,[a[6]||(a[6]=(0,o.Lk)("img",{src:"/images/등산객.png",width:"16px;"},null,-1)),(0,o.eW)((0,l.v_)(t.userNickName),1)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",{class:(0,l.C4)(["card-text",{expanded:t.expanded}]),id:"cardContent"},(0,l.v_)(t.communityBody),3),!t.expanded&&t.communityBody.length>50?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:a=>e.toggleExpand(t),class:"show-more-btn"}," 더 보기 ",8,X)):(0,o.Q3)("",!0),t.expanded?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:a=>e.toggleExpand(t),class:"show-more-btn"}," 닫기 ",8,K)):(0,o.Q3)("",!0)])])])])])))),128))])]),(0,o.bF)(i.A,{class:"footer"})]))}},F=a(1241);const O=(0,F.A)(B,[["__scopeId","data-v-1ad76004"]]);var V=O}}]);
//# sourceMappingURL=614.aaf66712.js.map