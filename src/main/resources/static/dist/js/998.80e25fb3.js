"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[998],{246:function(t,n,a){a.d(n,{vJ:function(){return m},SH:function(){return d},px:function(){return i},sZ:function(){return s},jL:function(){return r},YG:function(){return v},yy:function(){return u},o2:function(){return g},lS:function(){return l},kl:function(){return f},Ob:function(){return h},t0:function(){return p},XG:function(){return k},lD:function(){return y},hc:function(){return L}});a(4114);var e=a(4373);function c(){const t=e.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}a(876);const o=c();async function s(){try{const t=await e.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function l(){try{const t=await e.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(t){try{const n=await e.A.get(`/api/complaint/mine/${t}`);return n.data}catch(n){console.error(n)}}async function r(t){try{const n=await e.A.get(`/api/complaint/myList/${t}`);return n.data}catch(n){console.error(n)}}async function u(){try{const t=await e.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const n=await e.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",n.status),console.log("민원글 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function d(t){try{const n=await e.A.get(`/api/complaint/one/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function f(t){try{const n=await e.A.get(`/api/userInfo/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function v(t){try{const n=await e.A.get(`/api/course/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function m(t){try{const n=await e.A.delete(`/api/complaint/delete/${t}`);return n.data}catch(n){console.error(n)}}async function y(t,n){try{const a=await e.A.patch(`/api/complaint/update/${t}`,n);return a.data}catch(a){console.error(a)}}async function h(t){try{const n=await o.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",n.data),n.data}catch(n){console.error(n)}}async function g(t){try{const n=await e.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function k(t){try{const n=await e.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",n.status),console.log("민원처리정보 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function L(t,n){try{const a=await e.A.patch(`/api/complaint/updateProcessing/${t}`,n);return a.data}catch(a){console.error(a)}}},6687:function(t,n,a){a.d(n,{$h:function(){return l},T_:function(){return u},aj:function(){return r},ec:function(){return i},ok:function(){return p},wK:function(){return s}});var e=a(144),c=a(5234),o=a(246);const s=(0,c.nY)("complaintlist",(()=>{const t=(0,e.KR)([]);async function n(){console.log("Fetching complaintlist ==="),t.value=await(0,o.sZ)(),console.log("postlist--",t.value)}return{complaintlist:t,fetchComplaintList:n}})),l=(0,c.nY)("recentcomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(){t.value=await(0,o.lS)()}return{recentcomplaintlist:t,fetchRecentComplaintList:n}})),i=(0,c.nY)("mycomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(n){t.value=await(0,o.px)(n)}return{mycomplaintlist:t,fetchMyComplaintList:n}})),r=(0,c.nY)("managingcomplaintlist",(()=>{const t=(0,e.KR)([]);async function n(n){t.value=await(0,o.jL)(n),console.log("담당업무--",t.value)}return{managingcomplaintlist:t,fetchManagingComplaintList:n}})),u=(0,c.nY)("pathList",(()=>{const t=(0,e.KR)([]);async function n(){t.value=await(0,o.yy)()}return{pathList:t,fetchPathList:n}})),p=(0,c.nY)("complaintByNo",(()=>{const t=(0,e.KR)({});async function n(n){try{t.value=await(0,o.SH)(n)}catch(a){console.error("Error fetching post:",a)}}return{complaintone:t,fetchComplaintone:n}}));(0,c.nY)("userpostlist",(()=>{const t=(0,e.KR)([]);async function n(){const n=sessionStorage.getItem("userNo");if(console.log(n),n)try{console.log("userpostlist -- 유저 포스트 리스트"),t.value=await(0,o.Ob)(n),console.log("userpostlist--",t.value)}catch(a){console.error("Error fetching userpostlist:",a)}else console.error("userNo is undefined or null")}return{userpostlist:t,fetchUserPost:n}}))},6998:function(t,n,a){a.r(n),a.d(n,{default:function(){return U}});a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var e=a(6768),c=a(4232),o=a(144),s=a(5130),l=a(2492),i=a(6687),r=a(246),u=a(876),p=a(5234);const d={id:"app"},f={class:"app-main"},v={class:"container",style:{height:"100px"}},m={class:"row",style:{height:"65px"}},y={class:"col-4 d-flex justify-content-center"},h={class:"row",style:{height:"45px"}},g={class:"col-6 d-flex justify-content-center"},k={class:"col-6 d-flex justify-content-center"},L={class:"card-container d-flex align-items-center justify-content-center mt-3 mb-4"},w={class:"col-12 col-md-9"},x={class:"card card-flush",id:"kt_contacts_list"},b={class:"card-body pt-3 pb-4",id:"kt_contacts_list_body",style:{height:"500px"}},A=["onClick"],C={class:"col-2 col-md-2 text-center"},I={class:"text-muted smaller-text"},R={class:"col-5 col-md-5"},P={class:"smaller-text",style:{"white-space":"nowrap"}},_={class:"col-2 col-md-2 text-center"},K={class:"text-muted smaller-text"},$={class:"col-3 col-md-3 text-center"},S={class:"text-muted smaller-text"},j={class:"card-footer d-flex justify-content-center pb-3"},E={"aria-label":"Pagination"},M={class:"pagination"},N=["onClick"],Y=7;var X={__name:"ComplaintListView",setup(t){const n=(0,i.wK)(),a=(0,i.$h)(),X=(0,i.ec)(),F=(0,o.KR)(!1);let T=(0,o.KR)("나의글"),U=localStorage.getItem("userId");const W=(0,o.KR)({}),D=(0,o.KR)(1);(0,e.sV)((async()=>{await n.fetchComplaintList(),await a.fetchRecentComplaintList(),await X.fetchMyComplaintList(U);const t=sessionStorage.getItem("hasRefreshed");t?sessionStorage.removeItem("hasRefreshed"):(sessionStorage.setItem("hasRefreshed","true"),window.location.reload());const e=[...new Set(V.value.map((t=>t.userId)))];await Promise.all(e.map((async t=>{const n=await(0,r.kl)(t);W.value[t]=n.userNickName})))}));const{complaintlist:G}=(0,p.bP)(n),{recentcomplaintlist:H}=(0,p.bP)(a),{mycomplaintlist:O}=(0,p.bP)(X),V=(0,e.EW)((()=>F.value?O.value:H.value)),Z=(0,e.EW)((()=>{const t=(D.value-1)*Y,n=t+Y;return V.value.slice(t,n)})),B=(0,e.EW)((()=>Math.ceil(V.value.length/Y)));function J(t){t>=1&&t<=B.value&&(D.value=t)}function q(){F.value=!F.value,T=F.value?"전체글":"나의글"}function z(t){return t.split(" ")[0]}function Q(t){return t.split(" ")[1]}const tt=(0,i.ok)();(0,p.bP)(tt);async function nt(t){await tt.fetchComplaintone(t),sessionStorage.setItem("complaintNo",t),u.A.replace({path:"/complaintInfoMobile"})}function at(){u.A.replace({path:"/complaintMobile"})}function et(){u.A.replace({path:"/clMapMobile"})}return(t,n)=>((0,e.uX)(),(0,e.CE)("div",d,[(0,e.Lk)("div",f,[(0,e.Lk)("div",v,[(0,e.Lk)("div",m,[n[3]||(n[3]=(0,e.Lk)("div",{class:"col-8 d-flex justify-content-center"},[(0,e.Lk)("span",{class:"fs-1 m-2 fw-bold"},"위험신고 목록")],-1)),(0,e.Lk)("div",y,[(0,e.Lk)("button",{class:"styled-button",onClick:n[0]||(n[0]=t=>et())},"지도보기")])]),(0,e.Lk)("div",h,[(0,e.Lk)("div",g,[(0,e.Lk)("button",{class:"styled-button",onClick:n[1]||(n[1]=t=>q())},(0,c.v_)((0,o.R1)(T)),1)]),(0,e.Lk)("div",k,[(0,e.Lk)("button",{class:"styled-button",onClick:n[2]||(n[2]=t=>at())},"신고하기")])])]),(0,e.Lk)("div",L,[(0,e.Lk)("div",w,[(0,e.Lk)("div",x,[(0,e.Lk)("div",b,[n[6]||(n[6]=(0,e.Fv)('<div class="container" data-v-5ad3e04c><div class="row" style="flex-wrap:nowrap;" data-v-5ad3e04c><div class="col-2 col-md-2 text-center" data-v-5ad3e04c><span class="text-muted fs-9" data-v-5ad3e04c>번호</span></div><div class="col-5 col-md-5 text-center" data-v-5ad3e04c><span style="white-space:nowrap;" class="text-muted fs-9" data-v-5ad3e04c>제목</span></div><div class="col-2 col-md-2 text-center" data-v-5ad3e04c><span class="text-muted fs-9" data-v-5ad3e04c>글쓴이</span></div><div class="col-3 col-md-3 text-center" data-v-5ad3e04c><span class="text-muted fs-9" data-v-5ad3e04c>작성시간</span></div></div><hr class="separator-line" data-v-5ad3e04c></div>',1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Z.value,((t,a)=>((0,e.uX)(),(0,e.CE)("div",{key:t.complaintNo,class:"container mb-2"},[(0,e.Lk)("div",{class:"row",style:{"flex-wrap":"nowrap"},onClick:n=>nt(t.complaintNo)},[(0,e.Lk)("div",C,[(0,e.Lk)("span",I,(0,c.v_)((D.value-1)*Y+a+1),1)]),(0,e.Lk)("div",R,[(0,e.Lk)("span",P,(0,c.v_)(t.complaintTitle),1)]),(0,e.Lk)("div",_,[(0,e.Lk)("span",K,(0,c.v_)(W.value[t.userId]||"..."),1)]),(0,e.Lk)("div",$,[(0,e.Lk)("span",S,[(0,e.Lk)("span",null,(0,c.v_)(z(t.createdAt)),1),n[4]||(n[4]=(0,e.Lk)("br",null,null,-1)),(0,e.Lk)("span",null,(0,c.v_)(Q(t.createdAt)),1)])])],8,A),n[5]||(n[5]=(0,e.Lk)("hr",{class:"separator-line"},null,-1))])))),128))]),(0,e.Lk)("div",j,[(0,e.Lk)("nav",E,[(0,e.Lk)("ul",M,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(B.value,(t=>((0,e.uX)(),(0,e.CE)("li",{class:(0,c.C4)(["page-item",{active:t===D.value}]),key:t},[(0,e.Lk)("a",{class:"page-link",href:"#",onClick:(0,s.D$)((n=>J(t)),["prevent"])},(0,c.v_)(t),9,N)],2)))),128))])])])])])])]),(0,e.bF)(l.A)]))}},F=a(1241);const T=(0,F.A)(X,[["__scopeId","data-v-5ad3e04c"]]);var U=T}}]);
//# sourceMappingURL=998.80e25fb3.js.map