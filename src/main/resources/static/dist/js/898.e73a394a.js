"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[898],{517:function(a,t,e){e.r(t),e.d(t,{default:function(){return f}});e(4114);var i=e(6768),s=e(7007),n=e(144),c=e(6886),d=e.n(c),o=(e(954),e(6912));const r={class:"dashboard"},l={class:"sidebar"},v={class:"header"},u={class:"main"};var h={__name:"RealTimePeopleHeatmapView",setup(a){o.t1.register(o.A6,o.E8,o.PP,o.kc,o.m_);const t=(0,n.KR)(null);let e=null,c=null;(0,i.sV)((async()=>{f();const a=await g(),t=await b();y(a),w(t),P(a),m()}));const h=(0,n.KR)(0),p=(0,n.KR)(100);function m(){const a=document.getElementById("trafficChart").getContext("2d"),t=new o.t1(a,{type:"bar",data:{labels:["현재 유동 인구","평균 유동 인구"],datasets:[{label:"유동 인구",data:[h.value,p.value],backgroundColor:["#3498db","#e74c3c"],borderColor:["#2980b9","#c0392b"],borderWidth:1,borderRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});setInterval((()=>{h.value=Math.floor(200*Math.random()),t.data.datasets[0].data=[h.value,p.value],t.update()}),5e3)}function f(){e=d().map(t.value,{center:[37.634845475,126.98081674],zoom:15,zoomControl:!0,scrollWheelZoom:!0,worldCopyJump:!0,zoomAnimation:!0,easeLinearity:.25,inertia:!0,inertiaDeceleration:3e3}),d().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap contributors"}).addTo(e)}async function b(){try{const a=await fetch("/data/인왕산ele copy.geojson");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){console.error("GeoJSON 파일 로드 실패:",a)}}async function g(){try{const a=await fetch("/data/인왕산ele copy.geojson");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){console.error("GeoJSON 파일 로드 실패:",a)}}function y(a){const t=k(a);c=d().heatLayer(t,{radius:25,blur:15,maxZoom:17}).addTo(e)}function k(a){const t=[];return a.features.forEach((a=>{const{type:e,coordinates:i}=a.geometry;"LineString"===e?i.forEach((([a,e])=>{t.push([e,a,.5])})):"MultiLineString"===e&&i.flat().forEach((([a,e])=>{t.push([e,a,.5])}))})),t}function w(a){a.features.forEach((a=>{const{type:t,coordinates:i}=a.geometry;if("LineString"===t){const a=i.map((([a,t])=>[t,a]));d().polyline(a,{color:"blue",weight:4,opacity:.8}).addTo(e)}else"MultiLineString"===t&&i.forEach((a=>{const t=a.map((([a,t])=>[t,a]));d().polyline(t,{color:"blue",weight:4,opacity:.8}).addTo(e)}))}))}function P(a){const t=k(a).map((([a,t])=>({lat:a,lng:t}))),e=T(t,200);function i(){const a=e.map((a=>(a.updatePosition(),[a.currentPosition.lat,a.currentPosition.lng,.7])));c&&c.setLatLngs(a)}setInterval(i,100)}function T(a,t){return Array.from({length:t},(()=>{const t=Math.floor(Math.random()*a.length),e=Math.random()>.5;return{currentPosition:a[t],currentIndex:t,isReverse:e,updatePosition(){this.currentIndex+=this.isReverse?-1:1,this.currentIndex<0?this.currentIndex=a.length-1:this.currentIndex>=a.length&&(this.currentIndex=0),this.currentPosition=a[this.currentIndex]}}}))}return(a,e)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(s.A,{style:{"z-index":"4",width:"1920px"}}),(0,i.Lk)("div",r,[(0,i.Lk)("aside",l,[(0,i.Lk)("div",v,[(0,i.Lk)("p",{onClick:e[0]||(e[0]=(...t)=>a.toggleExtraSidebar&&a.toggleExtraSidebar(...t)),class:"header-title"},"자세히 보기")]),e[1]||(e[1]=(0,i.Fv)('<div class="section" data-v-7161c0e4><h3 id="realTimeTraffic" data-v-7161c0e4>실시간 트래픽 비교</h3><canvas id="trafficChart" data-v-7161c0e4></canvas></div><div class="content" data-v-7161c0e4><p id="contentTitle" data-v-7161c0e4>코스 이용현황</p><div class="stats-container" data-v-7161c0e4><div class="section" data-v-7161c0e4><h3 id="todayPeopleTOP5" data-v-7161c0e4>금일 유동인구 TOP 4</h3><ul class="station-list" data-v-7161c0e4><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>1</div><div class="station" data-v-7161c0e4>마루</div><div class="number" data-v-7161c0e4>47</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>2</div><div class="station" data-v-7161c0e4>무악</div><div class="number" data-v-7161c0e4>24</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>3</div><div class="station" data-v-7161c0e4>홍제</div><div class="number" data-v-7161c0e4>11</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>4</div><div class="station" data-v-7161c0e4>부암</div><div class="number" data-v-7161c0e4>9</div></li></ul></div><div class="section" data-v-7161c0e4><h3 id="CoursePeopleTOP5" data-v-7161c0e4>누적 코스별 유동인구 TOP 5</h3><ul class="station-list" data-v-7161c0e4><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>1</div><div class="station" data-v-7161c0e4>무악</div><div class="number" data-v-7161c0e4>67,969</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>2</div><div class="station" data-v-7161c0e4>마루</div><div class="number" data-v-7161c0e4>52,164</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>3</div><div class="station" data-v-7161c0e4>홍제</div><div class="number" data-v-7161c0e4>23,164</div></li><li data-v-7161c0e4><div class="rank" data-v-7161c0e4>4</div><div class="station" data-v-7161c0e4>부암</div><div class="number" data-v-7161c0e4>7,164</div></li></ul></div></div></div>',2))]),(0,i.Lk)("main",u,[(0,i.Lk)("div",{id:"map",ref_key:"mapContainer",ref:t,class:"map-container"},null,512)])])],64))}},p=e(1241);const m=(0,p.A)(h,[["__scopeId","data-v-7161c0e4"]]);var f=m}}]);
//# sourceMappingURL=898.e73a394a.js.map