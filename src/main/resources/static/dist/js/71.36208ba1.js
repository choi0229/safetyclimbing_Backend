"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[71],{246:function(t,a,n){n.d(a,{vJ:function(){return v},SH:function(){return d},px:function(){return i},sZ:function(){return s},jL:function(){return r},YG:function(){return f},yy:function(){return u},o2:function(){return L},lS:function(){return c},kl:function(){return m},Ob:function(){return k},t0:function(){return p},XG:function(){return y},lD:function(){return g},hc:function(){return b}});n(4114);var e=n(4373);function o(){const t=e.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}n(876);const l=o();async function s(){try{const t=await e.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function c(){try{const t=await e.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(t){try{const a=await e.A.get(`/api/complaint/mine/${t}`);return a.data}catch(a){console.error(a)}}async function r(t){try{const a=await e.A.get(`/api/complaint/myList/${t}`);return a.data}catch(a){console.error(a)}}async function u(){try{const t=await e.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const a=await e.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",a.status),console.log("민원글 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function d(t){try{const a=await e.A.get(`/api/complaint/one/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function m(t){try{const a=await e.A.get(`/api/userInfo/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function f(t){try{const a=await e.A.get(`/api/course/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function v(t){try{const a=await e.A.delete(`/api/complaint/delete/${t}`);return a.data}catch(a){console.error(a)}}async function g(t,a){try{const n=await e.A.patch(`/api/complaint/update/${t}`,a);return n.data}catch(n){console.error(n)}}async function k(t){try{const a=await l.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",a.data),a.data}catch(a){console.error(a)}}async function L(t){try{const a=await e.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",a),a.data}catch(a){console.error(a)}}async function y(t){try{const a=await e.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",a.status),console.log("민원처리정보 작성에 대한 응답 데이터:",a.data),a.data}catch(a){throw console.error("API 요청 중 오류 발생:",a),a}}async function b(t,a){try{const n=await e.A.patch(`/api/complaint/updateProcessing/${t}`,a);return n.data}catch(n){console.error(n)}}},6687:function(t,a,n){n.d(a,{$h:function(){return c},T_:function(){return u},aj:function(){return r},ec:function(){return i},ok:function(){return p},wK:function(){return s}});var e=n(144),o=n(5234),l=n(246);const s=(0,o.nY)("complaintlist",(()=>{const t=(0,e.KR)([]);async function a(){console.log("Fetching complaintlist ==="),t.value=await(0,l.sZ)(),console.log("postlist--",t.value)}return{complaintlist:t,fetchComplaintList:a}})),c=(0,o.nY)("recentcomplaintlist",(()=>{const t=(0,e.KR)([]);async function a(){t.value=await(0,l.lS)()}return{recentcomplaintlist:t,fetchRecentComplaintList:a}})),i=(0,o.nY)("mycomplaintlist",(()=>{const t=(0,e.KR)([]);async function a(a){t.value=await(0,l.px)(a)}return{mycomplaintlist:t,fetchMyComplaintList:a}})),r=(0,o.nY)("managingcomplaintlist",(()=>{const t=(0,e.KR)([]);async function a(a){t.value=await(0,l.jL)(a),console.log("담당업무--",t.value)}return{managingcomplaintlist:t,fetchManagingComplaintList:a}})),u=(0,o.nY)("pathList",(()=>{const t=(0,e.KR)([]);async function a(){t.value=await(0,l.yy)()}return{pathList:t,fetchPathList:a}})),p=(0,o.nY)("complaintByNo",(()=>{const t=(0,e.KR)({});async function a(a){try{t.value=await(0,l.SH)(a)}catch(n){console.error("Error fetching post:",n)}}return{complaintone:t,fetchComplaintone:a}}));(0,o.nY)("userpostlist",(()=>{const t=(0,e.KR)([]);async function a(){const a=sessionStorage.getItem("userNo");if(console.log(a),a)try{console.log("userpostlist -- 유저 포스트 리스트"),t.value=await(0,l.Ob)(a),console.log("userpostlist--",t.value)}catch(n){console.error("Error fetching userpostlist:",n)}else console.error("userNo is undefined or null")}return{userpostlist:t,fetchUserPost:a}}))},3071:function(t,a,n){n.r(a),n.d(a,{default:function(){return D}});var e=n(6768),o=n(4232),l=n(144),s=n(5130),c=n(6687),i=n(5234),r=n(876),u=n(246),p=n(8077),d=n(4373);const m={class:"container"},f={class:"card"},v={class:"card-body p-lg-5 pb-lg-0"},g={class:"d-flex flex-column flex-md-row"},k={class:"flex-md-grow-1 me-md-4"},L={class:"mb-2"},y={class:"d-flex flex-wrap mb-3 align-items-center"},b={class:"mb-3"},h={class:"text-gray-900 fs-3 fw-bold mb-2"},w={class:"fw-bold text-muted fs-6 ps-1"},x={class:"fw-bold text-muted fs-6 ps-1"},A={class:"fw-bold text-muted fs-6 ps-1"},C={class:"fw-bold text-muted fs-6 ps-1"},R={class:"image-container mb-2 d-flex justify-content-center"},_=["src"],I={class:"card mb-2",style:{height:"150px"}},K={class:"card-body p-2"},P={class:"fs-6 text-gray-600"},T={class:"modal fade",id:"complaint_update",tabindex:"-1","aria-hidden":"true"},$={class:"modal-dialog mw-1000px",style:{width:"800px"}},N={class:"modal-content rounded"},Y={class:"modal-body scroll-y px-10 px-lg-15 pt-0 pb-15"},j={id:"kt_modal_new_target_form",class:"form"},E={class:"d-flex flex-column mb-8 fv-row mt-3"},U={class:"form-group mb-2"},M={class:"d-flex flex-column mb-8 fv-row"},S={class:"d-flex flex-column mb-8 fv-row"},q={class:"d-flex flex-column mb-8 fv-row mt-2"},F={class:"text-center mt-3"};var J={__name:"ComplaintInfoView",setup(t){const a=(0,l.KR)(""),n=(0,l.KR)(""),J=(0,l.KR)(""),V=(0,l.KR)("");let B=0,D=0;const H=(0,c.ok)(),{complaintone:G}=(0,i.bP)(H);function O(){r.A.replace({path:"/complaintList"})}function X(t){if(1!=confirm("정말 삭제하시겠습니까??"))return!1;(0,u.vJ)(t),O()}let Z;function z(){window.scrollTo({top:0,behavior:"smooth"}),a.value=G.value.complaintTitle,n.value=G.value.mountainName,J.value=G.value.complaintContent,V.value=G.value.complaintType;const t=document.querySelector("#complaint_update");Z=new p.aF(t),Z.show(),setTimeout((()=>{Q()}),500)}function Q(){const t=document.createElement("script");t.onload=()=>kakao.maps.load(W),t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=services",document.head.appendChild(t)}function W(){const t=document.getElementById("map"),a={center:new kakao.maps.LatLng(G.value.latitude,G.value.longitude),level:8},n=new kakao.maps.Map(t,a);var e=new kakao.maps.Marker({position:n.getCenter()});e.setMap(n),kakao.maps.event.addListener(n,"click",(function(t){var a=t.latLng;e.setPosition(a);var n="클릭한 위치의 위도는 "+a.getLat()+" 이고, ";n+="경도는 "+a.getLng()+" 입니다",B=a.getLat(),D=a.getLng();var o=document.getElementById("clickLatlng");o.innerHTML=n}))}async function tt(t){let e=await et();null==e&&(e=G.value.complaintImg),console.log("수정할 글번호 : ",t);const o=G.value.latitude,l=G.value.longitude,s=0!==B?B:o,c=0!==D?D:l,i={complaintNo:t,complaintTitle:a.value,complaintContent:J.value,complaintType:V.value,mountainName:n.value,latitude:s,longitude:c,complaintImg:e||""};G.value.complaintTitle=a.value,G.value.complaintContent=J.value,G.value.complaintType=V.value,G.value.mountainName=n.value,G.value.latitude=B,G.value.longitude=D,G.value.complaintImg=e,(0,u.lD)(t,i),Z.hide()}const at=(0,l.KR)(null),nt=t=>{at.value=t.target.files[0]},et=async()=>{if(!at.value)return null;const t=new FormData;t.append("file",at.value);try{const a=await d.A.post("/api/complaint/upload",t,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(a){return console.error("Error uploading image",a),null}};return(t,c)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",m,[(0,e.Lk)("div",f,[(0,e.Lk)("div",v,[(0,e.Lk)("div",g,[(0,e.Lk)("div",k,[(0,e.Lk)("div",L,[(0,e.Lk)("div",y,[(0,e.Lk)("button",{class:"styled-button",onClick:c[0]||(c[0]=t=>O())},"뒤로가기")]),(0,e.Lk)("div",b,[(0,e.Lk)("h1",h,(0,o.v_)((0,l.R1)(G).complaintTitle),1),c[9]||(c[9]=(0,e.Lk)("hr",{class:"separator-line2"},null,-1)),(0,e.Lk)("span",w," 신고자 : "+(0,o.v_)((0,l.R1)(G).userId),1),c[10]||(c[10]=(0,e.Lk)("hr",{class:"separator-line"},null,-1)),(0,e.Lk)("span",x," 신고 날짜 : "+(0,o.v_)((0,l.R1)(G).createdAt),1),c[11]||(c[11]=(0,e.Lk)("hr",{class:"separator-line"},null,-1)),(0,e.Lk)("span",A," 신고 유형 : "+(0,o.v_)((0,l.R1)(G).complaintType),1),c[12]||(c[12]=(0,e.Lk)("hr",{class:"separator-line"},null,-1)),(0,e.Lk)("span",C," 산이름 : "+(0,o.v_)((0,l.R1)(G).mountainName),1)]),c[13]||(c[13]=(0,e.Lk)("hr",{class:"separator-line"},null,-1)),(0,e.Lk)("div",R,[(0,e.Lk)("img",{src:(0,l.R1)(G).complaintImg,alt:"Complaint Image",class:"img-fluid"},null,8,_)]),c[14]||(c[14]=(0,e.Lk)("hr",{class:"separator-line"},null,-1)),c[15]||(c[15]=(0,e.Lk)("p",{class:"fw-bold text-muted fs-6 ps-1"},"신고 내용",-1)),(0,e.Lk)("div",I,[(0,e.Lk)("div",K,[(0,e.Lk)("p",P,(0,o.v_)((0,l.R1)(G).complaintContent),1)])]),c[16]||(c[16]=(0,e.Lk)("hr",{class:"separator-line mt-3"},null,-1)),(0,e.Lk)("button",{class:"styled-button2 me-2",onClick:c[1]||(c[1]=t=>z())},"수정"),(0,e.Lk)("button",{class:"styled-button2",onClick:c[2]||(c[2]=t=>X((0,l.R1)(G).complaintNo))}," 삭제 ")])])])])])]),(0,e.Lk)("div",T,[(0,e.Lk)("div",$,[(0,e.Lk)("div",N,[c[25]||(c[25]=(0,e.Lk)("div",{class:"modal-header pb-0 border-0 justify-content-end"},[(0,e.Lk)("div",{class:"","data-bs-dismiss":"modal"},[(0,e.Lk)("button",{class:"btn btn-sm btn-success"},"닫기")])],-1)),(0,e.Lk)("div",Y,[(0,e.Lk)("form",j,[c[22]||(c[22]=(0,e.Lk)("div",{class:"mb-8 text-center"},[(0,e.Lk)("h1",{class:"mb-4"},"신고 글 수정"),(0,e.Lk)("div",{class:"text-muted fs-6"},"제목, 이미지, 위치, 내용을 수정하세요.")],-1)),(0,e.Lk)("div",E,[c[17]||(c[17]=(0,e.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,e.Lk)("span",{class:"required"},"제목")],-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control form-control-solid",name:"target_title","onUpdate:modelValue":c[3]||(c[3]=t=>a.value=t)},null,512),[[s.Jo,a.value]])]),c[23]||(c[23]=(0,e.Lk)("label",{for:"category",class:"col-form-label fw-bold"},"구분",-1)),(0,e.Lk)("div",U,[(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":c[4]||(c[4]=t=>V.value=t),id:"number",name:"number",class:"form-control",style:{cursor:"pointer"}},c[18]||(c[18]=[(0,e.Lk)("option",{value:"",disabled:""},"유형 선택",-1),(0,e.Lk)("option",{value:"파손"},"파손",-1),(0,e.Lk)("option",{value:"낙석"},"낙석",-1),(0,e.Lk)("option",{value:"화재"},"화재",-1)]),512),[[s.u1,V.value]])]),(0,e.Lk)("div",M,[c[19]||(c[19]=(0,e.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,e.Lk)("span",{class:"required"},"산이름")],-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control form-control-solid",name:"target_title","onUpdate:modelValue":c[5]||(c[5]=t=>n.value=t)},null,512),[[s.Jo,n.value]])]),c[24]||(c[24]=(0,e.Lk)("div",{class:"mb-3 mt-3"},[(0,e.Lk)("div",{id:"map",class:"map-container"}),(0,e.Lk)("p",null,[(0,e.Lk)("em",null,"지도를 클릭해주세요!")]),(0,e.Lk)("div",{id:"clickLatlng"})],-1)),(0,e.Lk)("div",S,[c[20]||(c[20]=(0,e.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,e.Lk)("span",{class:"required"},"파일 선택")],-1)),(0,e.Lk)("input",{type:"file",id:"image",onChange:nt,ref:"image"},null,544)]),(0,e.Lk)("div",q,[c[21]||(c[21]=(0,e.Fv)('<label class="d-flex align-items-center fs-6 fw-semibold mb-2" data-v-285ea83a><span class="required" data-v-285ea83a>내용</span><span class="ms-1" data-bs-toggle="tooltip" title="내용을 입력하세요. 필수랍니다~" data-v-285ea83a><i class="ki-duotone ki-information-5 text-gray-500 fs-6" data-v-285ea83a><span class="path1" data-v-285ea83a></span><span class="path2" data-v-285ea83a></span><span class="path3" data-v-285ea83a></span></i></span></label>',1)),(0,e.bo)((0,e.Lk)("textarea",{class:"form-control form-control-solid",name:"target_content","onUpdate:modelValue":c[6]||(c[6]=t=>J.value=t),rows:"5"},null,512),[[s.Jo,J.value]])]),(0,e.Lk)("div",F,[(0,e.Lk)("button",{type:"button",class:"btn btn-success",onClick:c[7]||(c[7]=t=>tt((0,l.R1)(G).complaintNo))}," 저장 "),(0,e.Lk)("button",{type:"reset",class:"btn btn-light ms-3",onClick:c[8]||(c[8]=a=>t.clearAll())}," 모두 지우기 ")])])])])])])],64))}},V=n(1241);const B=(0,V.A)(J,[["__scopeId","data-v-285ea83a"]]);var D=B}}]);
//# sourceMappingURL=71.36208ba1.js.map