"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[826],{7282:function(e,a,t){t.d(a,{A:function(){return r}});var o=t(6768);const n={id:"mobileFooter"};var s={__name:"MobileFooterView3",setup(e){function a(){window.location.href="/mobilemainview"}function t(){window.location.href="/mobilecourseview"}function s(){window.location.href="/mobilecommunity"}function l(){window.location.href="/complaintListMobile"}function i(){window.location.href="/record"}return(e,r)=>((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",{class:"footer-category",onClick:r[0]||(r[0]=e=>t()),style:{"margin-right":"10px"}},r[5]||(r[5]=[(0,o.Lk)("img",{src:"/images/코스2.png",alt:"코스 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"코스",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:r[1]||(r[1]=e=>i()),style:{"margin-right":"10px"}},r[6]||(r[6]=[(0,o.Lk)("img",{src:"/images/HikingIcon.gif",alt:"등산 아이콘",style:{filter:"hue-rotate(280deg)",width:"45px",height:"45px"}},null,-1),(0,o.Lk)("p",{style:{}},"등산",-1)])),(0,o.Lk)("div",{class:"footer-category home",onClick:r[2]||(r[2]=e=>a())},r[7]||(r[7]=[(0,o.Lk)("img",{src:"/images/홈.png",alt:"홈 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"홈",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:r[3]||(r[3]=e=>l()),style:{"margin-left":"10px"}},r[8]||(r[8]=[(0,o.Lk)("img",{src:"/images/위험신고.png",alt:"민원 신고 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("p",{style:{}},"민원신고",-1)])),(0,o.Lk)("div",{class:"footer-category",onClick:r[4]||(r[4]=e=>s()),style:{"margin-left":"10px"}},r[9]||(r[9]=[(0,o.Lk)("img",{src:"/images/커뮤니티.png",alt:"커뮤니티 아이콘",style:{filter:"grayscale(100%) brightness(0%)"}},null,-1),(0,o.Lk)("div",{style:{margin:"0","font-size":"13px","line-height":"1.2","text-align":"center"}},"커뮤니티",-1)]))]))}},l=t(1241);const i=(0,l.A)(s,[["__scopeId","data-v-43785973"]]);var r=i},2445:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);var o=t(6768),n=t(4232),s=t(7282),l=t(9126),i=t(144),r=t(4373),c=t(876),d=t(8077);const u={class:"btn-group-container"},p={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},g={class:"app-main"},k={class:"map-container"},m={class:"timer-display"},v={class:"centered-button"},f={class:"modal",id:"saveModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},h={class:"modal-dialog modal-dialog-centered"},b={class:"modal-content"},y={class:"modal-body"},w={class:"d-flex flex-column mb-3 fv-row"},L={class:"modal-footer"};var x={__name:"RecordView",setup(e){const a=(0,i.KR)(37.64177404152081),t=(0,i.KR)(126.98750152017325),x=(0,i.KR)(null),C=(0,i.KR)(null),F=(0,i.KR)(null),I=(0,i.KR)("");let E,K,R,A,P,_,M=(0,i.KR)(0),S=(0,i.KR)(0),$=(0,i.KR)(0),T=(0,i.Kh)([]);const W=(0,i.KR)(!1),V=(0,i.KR)(!1),N=(0,i.KR)("30m 앞에 위험 구간입니다. 주의하세요."),j=new Set,O=(0,i.KR)(!1);function B(){const e=document.createElement("script");e.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=clusterer,services",document.head.appendChild(e),e.onload=()=>{window.kakao&&window.kakao.maps&&window.kakao.maps.load((()=>{const e=document.getElementById("map"),o={center:new kakao.maps.LatLng(a.value,t.value),level:3};K=new kakao.maps.Map(e,o),Q(),U(),G("/data/2023산악사고_인왕산2.geojson","/images/danger.png"),a.value&&t.value&&(console.log("실행"),J())}))}}function q(e,a){const t=[e,a],o=new kakao.maps.Polyline({path:t});return o.getLength()}function z(e){console.log("Checking proximity for position:",e),X.value.forEach((a=>{const t=a.getPosition(),o=`${t.getLat()},${t.getLng()}`;if(j.has(o))return;const n=q(e,t);n<=30&&(console.log("위험 구역 접근:",a.getTitle()),H(),j.add(o))}))}function D(){return new Promise(((e,a)=>{const t=document.createElement("script");t.src="https://code.responsivevoice.org/responsivevoice.js?key=VGYcmCsP",t.onload=()=>{O.value=!0,e()},t.onerror=()=>a(new Error("ResponsiveVoice.js 로드 실패")),document.head.appendChild(t)}))}function H(){if(O.value&&window.responsiveVoice){const e=N.value,a="Korean Female";window.responsiveVoice.speak(e,a)}else alert("음성 합성 라이브러리가 로드되지 않았습니다.")}const X=(0,i.KR)([]);async function G(e,a){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.json();console.log(`${e} 마커 데이터 로드 성공:`,o);const n=new kakao.maps.Size(35,45),s={offset:new kakao.maps.Point(12,35)},l=new kakao.maps.MarkerImage(a,n,s);o.features.forEach((e=>{const a=e.geometry.coordinates[1],t=e.geometry.coordinates[0],o=new kakao.maps.LatLng(a,t),n=new kakao.maps.Marker({position:o,map:K,title:e.properties.MNTN_NM,image:l,id:`${a},${t}`});X.value.push(n);const s=new kakao.maps.InfoWindow({content:`<div style="padding:5px;">${e.properties.MNTN_NM}<br>${e.properties.SAFE_SPOT2}</div>`});kakao.maps.event.addListener(n,"mouseover",(()=>s.open(K.value,n))),kakao.maps.event.addListener(n,"mouseout",(()=>s.close()))}));const i=37.515772995522,r=127.03493276089,c=new kakao.maps.LatLng(i,r),d=new kakao.maps.Marker({position:c,map:K,title:"추가 위험 지역",image:l,id:`${i},${r}`});X.value.push(d)}catch(t){console.error(`${e} 파일 로드 중 에러 발생:`,t)}}async function Y(){try{const e=await r.A.get("/api/recordlocation");console.log("Received response:",e.data),a.value=e.data.latitude,t.value=e.data.longitude,x.value=e.data.altitude,C.value=e.data.speed,F.value=e.data.bearing,I.value=e.data.time,J()}catch(e){console.error("Error fetching location:",e)}}function J(){if(!K)return;const e=new kakao.maps.LatLng(a.value,t.value);W.value&&(T.push({latitude:a.value,longitude:t.value,altitude:x.value,speed:C.value,bearing:F.value,time:I.value}),E.setPath(T.map((e=>new kakao.maps.LatLng(e.latitude,e.longitude))))),R&&A&&P&&(R.setPosition(e),A.setPosition(e),P.setPosition(e)),K.panTo(e),z(e)}function Q(){const e=new kakao.maps.LatLng(a.value,t.value);P=new kakao.maps.CustomOverlay({position:e,content:'<div style="width: 24px; height: 24px; border-radius: 50%; background-color: rgba(255, 0, 0, 0.2);"></div>',yAnchor:.5}),P.setMap(K),A=new kakao.maps.CustomOverlay({position:e,content:'<div style="width: 14px; height: 14px; border-radius: 50%; background-color: #FFFFFF;"></div>',yAnchor:.5}),A.setMap(K),R=new kakao.maps.CustomOverlay({position:e,content:'<div style="width: 10px; height: 10px; background-color: #FF0000; border-radius: 50%;"></div>',yAnchor:.5}),R.setMap(K)}function U(){E=new kakao.maps.Polyline({map:K,path:T,strokeWeight:5,strokeColor:"#0000FF",strokeOpacity:.7,strokeStyle:"solid"})}function Z(){$.value++,$.value>=60&&($.value=0,S.value++),S.value>=60&&(S.value=0,M.value++)}function ee(){W.value?(oe(),V.value=!0):(ae(),V.value=!1)}function ae(){W.value||(W.value=!0,_=setInterval(Z,1e3))}function te(){clearInterval(_),W.value=!1}function oe(){clearInterval(_),W.value=!1,ce()}const ne=(0,o.EW)((()=>M.value.toString().padStart(2,"0"))),se=(0,o.EW)((()=>S.value.toString().padStart(2,"0"))),le=(0,o.EW)((()=>$.value.toString().padStart(2,"0"))),ie=(0,o.EW)((()=>`${ne.value}:${se.value}:${le.value}`));let re;function ce(){const e=document.querySelector("#saveModal");re=new d.aF(e),re.show()}function de(){M.value=0,S.value=0,$.value=0,T.splice(0,T.length),E.setPath(T)}async function ue(){console.log("경로:",T,"타입:",typeof T);const e=T.map((e=>({latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,speed:e.speed,bearing:e.bearing,time:e.time})));console.log("바꾼 경로 : ",e);const a=await pe();console.log("id = "+a),a?(await ge(e,a),re.hide(),de(),c.A.push({path:"/recordImg"})):console.error("Path ID is not valid.")}async function pe(){const e=await he(),a={userId:localStorage.getItem("userId"),pathImg:e||"",totalTime:ie.value};try{const e=await r.A.post("/api/savePathInfo",a);return console.log("등산 기록 코스에 대한 응답 데이터:",e.data),e.data}catch(t){console.error("Error fetching location:",t)}}async function ge(e,a){for(const o of e){const e={pathId:a,latitude:o.latitude,longitude:o.longitude,altitude:o.altitude,speed:o.speed,bearing:o.bearing,time:o.time};try{const a=await r.A.post("/api/saveTrackingPath",e);console.log("코스 경로 정보에 대한 응답 데이터:",a.data)}catch(t){console.error("Error saving tracking path:",t)}}}function ke(){c.A.push({path:"/recordImg"})}function me(){c.A.push({path:"/myCommunity"})}(0,o.sV)((async()=>{try{await D(),B(),Y(),setInterval(Y,2e3)}catch(e){console.log(e)}})),(0,o.xo)((()=>{clearInterval(Y)}));const ve=(0,i.KR)(null),fe=e=>{ve.value=e.target.files[0]},he=async()=>{if(!ve.value)return null;const e=new FormData;e.append("file",ve.value);try{const a=await r.A.post("/api/complaint/upload",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(a){return console.error("Error uploading image",a),null}};return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l.A,{class:"header"}),(0,o.Lk)("div",u,[(0,o.Lk)("div",p,[a[4]||(a[4]=(0,o.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",checked:""},null,-1)),a[5]||(a[5]=(0,o.Lk)("label",{class:"btn btn-outline-success",for:"btnradio1"},"운동",-1)),(0,o.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off",onClick:a[0]||(a[0]=e=>ke())}),a[6]||(a[6]=(0,o.Lk)("label",{class:"btn btn-outline-success",for:"btnradio2"},"기록",-1)),(0,o.Lk)("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off",onClick:a[1]||(a[1]=e=>me())}),a[7]||(a[7]=(0,o.Lk)("label",{class:"btn btn-outline-success",for:"btnradio3"},"나의 커뮤니티",-1))])]),(0,o.bF)(l.A,{class:"header"}),(0,o.Lk)("div",g,[(0,o.Lk)("div",k,[a[11]||(a[11]=(0,o.Lk)("div",{id:"map"},null,-1)),(0,o.Lk)("div",m,[(0,o.Lk)("span",null,(0,n.v_)(ne.value),1),a[8]||(a[8]=(0,o.eW)(":")),(0,o.Lk)("span",null,(0,n.v_)(se.value),1),a[9]||(a[9]=(0,o.eW)(":")),(0,o.Lk)("span",null,(0,n.v_)(le.value),1)]),(0,o.Lk)("div",v,[(0,o.Lk)("button",{onClick:ee,class:"start-button"},(0,n.v_)(W.value?"저장":"시작"),1)]),(0,o.Lk)("button",{class:"goal-button",onClick:te},a[10]||(a[10]=[(0,o.Lk)("img",{src:"/images/정지4.png",alt:"",style:{width:"20px",height:"20px"}},null,-1)])),a[12]||(a[12]=(0,o.Lk)("button",{class:"TTS"},[(0,o.Lk)("img",{src:"/images/음성.png",style:{width:"32px",height:"auto"}})],-1))])]),(0,o.bF)(s.A,{class:"footer"}),(0,o.Lk)("div",f,[(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[a[15]||(a[15]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title"},[(0,o.Lk)("img",{src:"/images/저장.png",alt:"",style:{width:"20px",height:"20px","margin-right":"3px"}}),(0,o.eW)("기록 저장")]),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,o.Lk)("div",y,[a[14]||(a[14]=(0,o.Lk)("p",{style:{"border-bottom":"solid 1px #333"}},"등산 기록을 저장하시겠습니까?",-1)),(0,o.Lk)("div",w,[a[13]||(a[13]=(0,o.Lk)("label",{class:"d-flex align-items-center fs-6 fw-semibold mb-2"},[(0,o.Lk)("span",{class:"required"},"사진 등록")],-1)),(0,o.Lk)("input",{type:"file",id:"image",onChange:fe,ref:"image",accept:"image/*"},null,544)])]),(0,o.Lk)("div",L,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:a[2]||(a[2]=e=>de())},"삭제"),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:a[3]||(a[3]=e=>ue())},"저장")])])])])],64))}},C=t(1241);const F=(0,C.A)(x,[["__scopeId","data-v-f99ac608"]]);var I=F}}]);
//# sourceMappingURL=826.a5b87964.js.map