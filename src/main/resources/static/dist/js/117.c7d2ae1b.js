"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[117],{2117:function(e,i,t){t.r(i),t.d(i,{default:function(){return u}});var o=t(6768),n=t(144),s=t(1387),a={__name:"MobileCourse3D",setup(e){const i=(0,s.rd)(),t=(0,s.lq)(),a=(0,n.KR)(JSON.parse(t.query.course)),r=()=>i.back();async function c(e,i,t){try{const o=await fetch(i),n=await o.json(),s=n.features.map((e=>{const i=e.geometry.coordinates[1],t=e.geometry.coordinates[0];return Cesium.Cartographic.fromDegrees(t,i)})),r=await Cesium.sampleTerrainMostDetailed(e.terrainProvider,s);r.forEach(((i,o)=>{const s=i.height+1,r=n.features[o];if(r.properties.MNTN_NM2==a.value.courseName){let o=t;switch(r.properties.type){case"실족":o="/images/strumble.png";break;case"조난":o="/images/distress.png";break;case"질환":o="/images/disease.png";break;case"밧줄":o="/images/rope.png";break;default:o=t}const n=e.entities.add({position:Cesium.Cartesian3.fromDegrees(Cesium.Math.toDegrees(i.longitude),Cesium.Math.toDegrees(i.latitude),s),billboard:{image:o,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,width:40,height:40},label:{text:r.properties.MNTN_NM||"",font:"14pt sans-serif",outlineColor:Cesium.Color.BLACK,outlineWidth:2,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-20)},description:`<img src="${o}" alt="사진" style="width: 150px; height: 100px;"/><br><div style="padding:5px;">${r.properties.MNTN_NM||""}<br>${r.properties.SAFE_SPOT2||""}</div>`});e.selectedEntityChanged.addEventListener((i=>{Cesium.defined(i)&&i===n&&(e.infoBox.viewModel.showInfo=!0,e.infoBox.viewModel.description=n.description)}))}}))}catch(o){console.error(`${i} 파일 로드 중 에러 발생:`,o)}}return(0,o.sV)((()=>{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/cesium@1.122.0/Build/Cesium/Cesium.js",e.onload=()=>{t()},document.head.appendChild(e);const i=document.createElement("link");async function t(){Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5Nzg1OWEzOS0yMWU0LTQ1MTEtOGY5NC1hZjg0YmFhNzgxMDMiLCJpZCI6MjU2MDAxLCJpYXQiOjE3MzE4OTgxMzB9.oNztRJnt40X1wN0JAS90SaLqSFEZIdQBSE7jFqLeH3g";const e=new Cesium.Viewer("cesiumContainer",{terrainProvider:await Cesium.createWorldTerrainAsync(),creditContainer:document.createElement("div"),animation:!1,navigationHelpButton:!1,homeButton:!1,sceneModePicker:!1,baseLayerPicker:!1,fullscreenButton:!1,infoBox:!1,geocoder:!1}),i=await o(),t=n(i,a.value.courseName);s(e,t),r(e,t),c(e,"/data/2023산악사고_인왕산2.geojson","/images/danger.png")}async function o(){const e=await fetch("/data/new북한산2.geojson"),i=await e.json();return i}function n(e,i){return{...e,features:e.features.filter((e=>e.properties.PMNTN_NM.includes(i)))}}function s(e,i){e.dataSources.add(Cesium.GeoJsonDataSource.load(i,{stroke:Cesium.Color.fromCssColorString("#00ff00"),fill:Cesium.Color.fromCssColorString("#00ff00"),strokeWidth:3,clampToGround:!0})).then((i=>{e.flyTo(i)}))}function r(e,i){let t=[];if(i.features.forEach((e=>{Array.isArray(e.geometry.coordinates)&&e.geometry.coordinates.forEach((e=>{Array.isArray(e)&&(t=t.concat(e))}))})),0===t.length)return void console.warn("No valid coordinates found for animation.");const o=Cesium.JulianDate.now(),n=Cesium.JulianDate.addSeconds(o,t.length,new Cesium.JulianDate),s=new Cesium.SampledPositionProperty;let r=new Cesium.Cartesian3(-500,-1200,1e3),c=30,u=-25;"마루"===a.value?.courseName?(r=new Cesium.Cartesian3(-500,-1200,1e3),c=30,u=-25):"부암동"===a.value?.courseName?(r=new Cesium.Cartesian3(300,100,300),c=250,u=-20):"무악동"===a.value?.courseName?(r=new Cesium.Cartesian3(50,-200,330),c=-20,u=-20):"홍제동"===a.value?.courseName&&(r=new Cesium.Cartesian3(-150,-200,330),c=50,u=-20),t.forEach((([e,i],t)=>{const n=Cesium.JulianDate.addSeconds(o,t,new Cesium.JulianDate),a=Cesium.Cartesian3.fromDegrees(e,i);s.addSample(n,a)}));const l=e.entities.add({position:s,point:{pixelSize:20,color:Cesium.Color.WHITE,outlineColor:Cesium.Color.fromCssColorString("#ffa500"),outlineWidth:3,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND}});e.clock.onTick.addEventListener((()=>{const i=l.position.getValue(e.clock.currentTime);if(i){const t=Cesium.Transforms.eastNorthUpToFixedFrame(i);e.camera.lookAtTransform(t,r),e.camera.setView({orientation:{heading:Cesium.Math.toRadians(c),pitch:Cesium.Math.toRadians(u),roll:0}})}})),e.clock.startTime=o.clone(),e.clock.stopTime=n.clone(),e.clock.currentTime=o.clone(),e.clock.clockRange=Cesium.ClockRange.LOOP_STOP,e.clock.multiplier=30,e.clock.shouldAnimate=!0,e.timeline.zoomTo(o,n)}i.rel="stylesheet",i.href="https://cesium.com/downloads/cesiumjs/releases/1.95/Build/Cesium/Widgets/widgets.css",document.head.appendChild(i)})),(e,i)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("button",{onClick:r,class:"back-button"},i[0]||(i[0]=[(0,o.Lk)("img",{src:"/images/뒤로가기.png",alt:"돋보기 아이콘",width:"30",height:"30"},null,-1)])),i[1]||(i[1]=(0,o.Lk)("div",{id:"cesiumContainer",style:{width:"100%",height:"100vh"}},null,-1))]))}},r=t(1241);const c=(0,r.A)(a,[["__scopeId","data-v-6409288b"]]);var u=c}}]);
//# sourceMappingURL=117.c7d2ae1b.js.map