"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[445],{246:function(t,n,e){e.d(n,{vJ:function(){return g},SH:function(){return d},px:function(){return r},sZ:function(){return s},jL:function(){return l},YG:function(){return m},yy:function(){return u},o2:function(){return v},lS:function(){return i},kl:function(){return f},Ob:function(){return y},t0:function(){return p},XG:function(){return k},lD:function(){return h},hc:function(){return w}});e(4114);var a=e(4373);function o(){const t=a.A.create({baseURL:"http://localhost:9000/api",headers:{"Content-Type":"application/json;charset=utf-8"}});return t}e(876);const c=o();async function s(){try{const t=await a.A.get("/api/complaint/list");return console.log("you can use getComplaintList",t.data),t.data}catch(t){console.error(t)}}async function i(){try{const t=await a.A.get("/api/complaint/listRecent");return console.log("you can use getRecentComplaintList",t.data),t.data}catch(t){console.error(t)}}async function r(t){try{const n=await a.A.get(`/api/complaint/mine/${t}`);return n.data}catch(n){console.error(n)}}async function l(t){try{const n=await a.A.get(`/api/complaint/myList/${t}`);return n.data}catch(n){console.error(n)}}async function u(){try{const t=await a.A.get("/api/pathList");return console.log("you can use getPathList",t.data),t.data}catch(t){console.error(t)}}async function p(t){try{const n=await a.A.post("/api/complaint/insert",t);return console.log("응답 상태 코드:",n.status),console.log("민원글 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function d(t){try{const n=await a.A.get(`/api/complaint/one/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function f(t){try{const n=await a.A.get(`/api/userInfo/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function m(t){try{const n=await a.A.get(`/api/course/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function g(t){try{const n=await a.A.delete(`/api/complaint/delete/${t}`);return n.data}catch(n){console.error(n)}}async function h(t,n){try{const e=await a.A.patch(`/api/complaint/update/${t}`,n);return e.data}catch(e){console.error(e)}}async function y(t){try{const n=await c.get(`/auth/userpostlist/${t}`);return console.log(t),console.log("you can use getUserPostList",n.data),n.data}catch(n){console.error(n)}}async function v(t){try{const n=await a.A.get(`/api/complaint/processing/${t}`);return console.log("API response:",n),n.data}catch(n){console.error(n)}}async function k(t){try{const n=await a.A.post("/api/complaint/insertProcessing",t);return console.log("응답 상태 코드:",n.status),console.log("민원처리정보 작성에 대한 응답 데이터:",n.data),n.data}catch(n){throw console.error("API 요청 중 오류 발생:",n),n}}async function w(t,n){try{const e=await a.A.patch(`/api/complaint/updateProcessing/${t}`,n);return e.data}catch(e){console.error(e)}}},6687:function(t,n,e){e.d(n,{$h:function(){return i},T_:function(){return u},aj:function(){return l},ec:function(){return r},ok:function(){return p},wK:function(){return s}});var a=e(144),o=e(5234),c=e(246);const s=(0,o.nY)("complaintlist",(()=>{const t=(0,a.KR)([]);async function n(){console.log("Fetching complaintlist ==="),t.value=await(0,c.sZ)(),console.log("postlist--",t.value)}return{complaintlist:t,fetchComplaintList:n}})),i=(0,o.nY)("recentcomplaintlist",(()=>{const t=(0,a.KR)([]);async function n(){t.value=await(0,c.lS)()}return{recentcomplaintlist:t,fetchRecentComplaintList:n}})),r=(0,o.nY)("mycomplaintlist",(()=>{const t=(0,a.KR)([]);async function n(n){t.value=await(0,c.px)(n)}return{mycomplaintlist:t,fetchMyComplaintList:n}})),l=(0,o.nY)("managingcomplaintlist",(()=>{const t=(0,a.KR)([]);async function n(n){t.value=await(0,c.jL)(n),console.log("담당업무--",t.value)}return{managingcomplaintlist:t,fetchManagingComplaintList:n}})),u=(0,o.nY)("pathList",(()=>{const t=(0,a.KR)([]);async function n(){t.value=await(0,c.yy)()}return{pathList:t,fetchPathList:n}})),p=(0,o.nY)("complaintByNo",(()=>{const t=(0,a.KR)({});async function n(n){try{t.value=await(0,c.SH)(n)}catch(e){console.error("Error fetching post:",e)}}return{complaintone:t,fetchComplaintone:n}}));(0,o.nY)("userpostlist",(()=>{const t=(0,a.KR)([]);async function n(){const n=sessionStorage.getItem("userNo");if(console.log(n),n)try{console.log("userpostlist -- 유저 포스트 리스트"),t.value=await(0,c.Ob)(n),console.log("userpostlist--",t.value)}catch(e){console.error("Error fetching userpostlist:",e)}else console.error("userNo is undefined or null")}return{userpostlist:t,fetchUserPost:n}}))},4445:function(t,n,e){e.r(n),e.d(n,{default:function(){return k}});e(4114);var a=e(6768),o=e(5130),c=e(4232),s=e(2492),i=e(144),r=e(6687),l=e(876),u=e(5234);const p={id:"app"},d={key:0,class:"modal"},f={class:"modal-content"},m={key:0},g=["onClick"];var h={__name:"ComplaintListMapViewMobile",setup(t){const n=(0,r.wK)();(0,a.sV)((async()=>{await n.fetchComplaintList();const t=sessionStorage.getItem("hasRefreshed");t?sessionStorage.removeItem("hasRefreshed"):(sessionStorage.setItem("hasRefreshed","true"),window.location.reload()),h()}));const{complaintlist:e}=(0,u.bP)(n);function h(){const t=document.createElement("script");t.onload=()=>{kakao.maps.load((()=>{v(),b.value=!0}))},t.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=clusterer,services",document.head.appendChild(t)}let y;function v(){const t=document.getElementById("map"),n={center:new kakao.maps.LatLng(37.660833,126.993333),level:9};y=new kakao.maps.Map(t,n);var a=new kakao.maps.MarkerClusterer({map:y,averageCenter:!0,minLevel:6});const o={"낙석":"/images/낙석.png","야생동물":"/images/야생동물.png","파손":"/images/파손.png"},c=e.value.map((t=>({title:t.mountainName,latlng:new kakao.maps.LatLng(t.latitude,t.longitude),type:t.complaintType,complaintNo:t.complaintNo})));function s(t){sessionStorage.setItem("complaintNo",t),l.A.push({path:"/complaintInfoMobile"})}const i=c.map((t=>{const n=o[t.type]||o["낙석"],e=new kakao.maps.Size(25,30),a=new kakao.maps.MarkerImage(n,e),c=new kakao.maps.Marker({position:t.latlng,title:t.title,image:a}),i=document.createElement("div");i.style.padding="2px",i.style.cursor="pointer",i.style.width="180px",i.style.textAlign="center",i.innerHTML=`\n            ${t.type} - ${t.title}\n            <i class="bi bi-caret-right-fill" style="font-size: 1em; color: black; cursor: pointer; margin-left: 1px;"></i>\n        `,i.querySelector(".bi-caret-right-fill").addEventListener("click",(()=>{s(t.complaintNo)}));const r=new kakao.maps.InfoWindow({content:i,zIndex:10});let l=null;return kakao.maps.event.addListener(c,"click",(function(){l!==r?(l&&l.close(),r.open(y,c),l=r):(r.close(),l=null)})),c}));a.addMarkers(i),kakao.maps.event.addListener(y,"zoom_changed",(function(){y.getLevel()<=6?(a.clear(),i.forEach((function(t){t.setMap(y)}))):(i.forEach((function(t){t.setMap(null)})),a.addMarkers(i))}))}const k=(0,r.ok)(),w=((0,u.bP)(k),(0,i.KR)(!1)),L=(0,i.KR)(""),C=(0,i.KR)([]);let b=(0,i.KR)(!1);function A(){w.value=!0,console.log("모달열림"+w.value)}function x(){w.value=!1}function I(){const t=L.value.trim();if(!t)return void alert("키워드를 입력해주세요!");if(!b.value)return void alert("Kakao Maps가 아직 로드되지 않았습니다.");const n=new kakao.maps.services.Places;n.keywordSearch(t,R)}function R(t,n){n===kakao.maps.services.Status.OK?C.value=t:alert("검색 결과가 없습니다.")}function K(t){const n=new kakao.maps.LatLng(t.y,t.x);y.setCenter(n),y.setLevel(7),x()}function M(){l.A.replace({path:"/complaintListMobile"})}return(t,n)=>((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("div",{class:"app-main"},[n[3]||(n[3]=(0,a.Lk)("div",{id:"map-container"},[(0,a.Lk)("div",{id:"map"})],-1)),(0,a.Lk)("div",{class:"review-search",style:{top:"30px"},onClick:A},n[1]||(n[1]=[(0,a.Lk)("div",{class:"search-container"},[(0,a.Lk)("input",{type:"text",placeholder:"검색"}),(0,a.Lk)("button",{class:"search-button"},[(0,a.Lk)("img",{src:"/images/돋보기white.png",alt:"Search"})])],-1)])),(0,a.Lk)("button",{id:"back-button",onClick:M},n[2]||(n[2]=[(0,a.Lk)("img",{src:"/images/뒤로가기.png",alt:"뒤로가기"},null,-1)]))]),n[4]||(n[4]=(0,a.Fv)('<div class="toggle-switch-container2" style="z-index:10;" data-v-014ff682><div class="toggle-switch2" data-v-014ff682><img src="/images/파손.png" alt="" style="width:15px;height:auto;margin-right:5px;" data-v-014ff682> 파손 </div><div class="toggle-switch2" data-v-014ff682><img src="/images/낙석.png" alt="" style="width:15px;height:auto;margin-right:5px;" data-v-014ff682> 낙석 </div><div class="toggle-switch2" style="font-size:12px;width:100px;" data-v-014ff682><img src="/images/야생동물.png" alt="" style="width:15px;height:auto;margin-right:5px;" data-v-014ff682> 야생동물 </div></div>',1)),(0,a.bF)(s.A),w.value?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",f,[(0,a.Lk)("span",{class:"close",onClick:x},"×"),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>L.value=t),placeholder:"장소 검색",class:"mt-5"},null,512),[[o.Jo,L.value]]),(0,a.Lk)("button",{class:"searchButton",onClick:I},"검색하기"),C.value.length>0?((0,a.uX)(),(0,a.CE)("ul",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.value,((t,n)=>((0,a.uX)(),(0,a.CE)("li",{key:n,onClick:n=>K(t)},(0,c.v_)(t.place_name)+" ("+(0,c.v_)(t.address_name)+") ",9,g)))),128))])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)]))}},y=e(1241);const v=(0,y.A)(h,[["__scopeId","data-v-014ff682"]]);var k=v}}]);
//# sourceMappingURL=445.f1b36a7a.js.map