"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[853],{7853:function(t,a,e){e.r(a),e.d(a,{default:function(){return y}});e(4114);var o=e(6768),n=e(5130),c=e(4232),s=e(7007),r=e(144),d=e(6886),i=e.n(d),l=(e(954),e(4373)),u=e(6912);const g={class:"dashboard"},f={class:"sidebar"},h={class:"stat-section"},p={class:"search"},k={class:"date-filter"},A={class:"chart-section"},b={class:"main"};var m={__name:"HeatmapView",setup(t){delete i().Icon.Default.prototype._getIconUrl,i().Icon.Default.mergeOptions({iconRetinaUrl:e(8249),iconUrl:e(7024),shadowUrl:e(1071)}),u.t1.register(...u.$L);const a=(0,r.KR)(null),d=(0,r.KR)([]),m=(0,r.KR)([]),v=(0,r.KR)("");let w=null,y=(0,r.KR)(!1);const C=(0,r.KR)(""),E=(0,r.KR)("");function x(){if(!C.value||!E.value)return void alert("날짜를 선택해주세요.");const t=d.value.filter((t=>{const a=new Date(t.createdAt);return a>=new Date(C.value)&&a<=new Date(E.value)}));L(t)}function L(t){M(t),N(t),z(t),B(t)}function M(t){w.eachLayer((t=>{t instanceof i().HeatLayer&&w.removeLayer(t)}));const a=t.map((t=>[t.latitude,t.longitude,1]));i().heatLayer(a,{radius:25,blur:15,maxZoom:17,maxOpacity:.5}).addTo(w)}function N(t){const a={"낙석":0,"파손":0,"야생동물":0};t.forEach((t=>{const e=t.complaintType;void 0!==a[e]&&a[e]++}));const e=u.t1.getChart("doughnutChart");e&&(e.data.datasets[0].data=[a["낙석"],a["파손"],a["야생동물"]],e.update())}function z(t){const a={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0};t.forEach((t=>{const e=new Date(t.createdAt).getMonth()+1;void 0!==a[e]&&a[e]++}));const e=u.t1.getChart("monthlyChart");e&&(e.data.datasets[0].data=Object.values(a),e.update())}function B(t){const a={"봄":0,"여름":0,"가을":0,"겨울":0};function e(t){const a=new Date(t).getMonth()+1;return a>=3&&a<=5?"봄":a>=6&&a<=8?"여름":a>=9&&a<=11?"가을":"겨울"}t.forEach((t=>{const o=e(t.createdAt);void 0!==a[o]&&a[o]++}));const o=u.t1.getChart("statsChart");o&&(o.data.datasets[0].data=Object.values(a),o.update())}function K(){w=i().map(a.value).setView([37.580955,126.957834],16),i().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(w)}function J(){return new Promise(((t,a)=>{if(window.kakao&&window.kakao.maps&&window.kakao.maps.services)return void t(window.kakao);const e=document.createElement("script");e.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=333bda7da18df138fb4d9b3e5cf351c4&autoload=false&libraries=services",e.onload=()=>{kakao.maps.load((()=>{t(window.kakao)}))},e.onerror=()=>{a(new Error("Kakao Maps API 로드 실패. API 키를 확인하세요."))},document.head.appendChild(e)}))}function U(){if(!y.value||!window.kakao||!window.kakao.maps||!window.kakao.maps.services)return void console.error("Kakao Maps API가 완전히 로드되지 않았습니다.");const t=new kakao.maps.services.Places;t.keywordSearch(v.value,((t,a)=>{if(a===kakao.maps.services.Status.OK){const a=t[0];a&&w.setView([a.y,a.x],19)}else console.error("장소 검색에 실패했습니다:",a)}))}async function O(){await R(w),S(),await H("/data/인왕산ele copy.geojson",w),D(),V(),I()}async function R(t){try{const a=await l.A.get("/api/complaint/list");d.value=a.data;const e=a.data.map((t=>[t.latitude,t.longitude,1]));i().heatLayer(e,{radius:25,blur:15,maxZoom:17,maxOpacity:.5}).addTo(t)}catch(a){console.error("Error loading complaint data:",a)}}async function S(){try{const t=await l.A.get("/api/complaint/rank");m.value=t.data}catch(t){console.error("Error loading complaint rank:",t)}}async function H(t,a){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();F(o,a)}catch(e){console.error("GeoJSON 파일 로드 중 에러 발생:",e)}}function F(t,a){let e=[];t.features.forEach((t=>{"MultiLineString"!==t.geometry.type&&"LineString"!==t.geometry.type||t.geometry.coordinates.forEach((a=>{const o=a.map((a=>a&&a.length>=2?{lng:a[0],lat:a[1],elevation:t.properties.DN||0}:null)).filter(Boolean);e.push(o)}))})),T(e,a)}function T(t,a){Array.isArray(t)?t.forEach((t=>{if(Array.isArray(t)&&t.length>0){const e=t.map((t=>[t.lat,t.lng]));i().polyline(e,{color:"blue",weight:5,opacity:.8}).addTo(a)}})):console.error("allCoordinates is not an array of arrays:",t)}function V(){const t={"낙석":0,"파손":0,"야생동물":0};d.value.forEach((a=>{const e=a.complaintType;void 0!==t[e]&&t[e]++}));const a=document.getElementById("doughnutChart").getContext("2d");new u.t1(a,{type:"doughnut",data:{labels:["낙석","파손","야생동물"],datasets:[{data:[t["낙석"],t["파손"],t["야생동물"]],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]},options:{responsive:!0,plugins:{legend:{position:"top"}}}})}async function D(){try{const t={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0};d.value.forEach((a=>{const e=new Date(a.createdAt).getMonth()+1;void 0!==t[e]&&t[e]++}));const a=document.getElementById("monthlyChart").getContext("2d");new u.t1(a,{type:"bar",data:{labels:["1","2","3","4","5","6","7","8","9","10","11","12"],datasets:[{label:"월별 사고",data:Object.values(t),backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,borderRadius:10}]},options:{scales:{y:{beginAtZero:!0}}}})}catch(t){console.error("Error loading monthly chart:",t)}}function I(){const t={"봄":0,"여름":0,"가을":0,"겨울":0};function a(t){const a=new Date(t).getMonth()+1;return a>=3&&a<=5?"봄":a>=6&&a<=8?"여름":a>=9&&a<=11?"가을":"겨울"}d.value.forEach((e=>{const o=a(e.createdAt);void 0!==t[o]&&t[o]++}));const e=document.getElementById("statsChart").getContext("2d");new u.t1(e,{type:"bar",data:{labels:["봄","여름","가을","겨울"],datasets:[{label:"계절별 사고",data:Object.values(t),backgroundColor:"rgba(75, 192, 192, 1)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,borderRadius:10}]},options:{scales:{y:{beginAtZero:!0}}}})}return(0,o.sV)((async()=>{try{await J(),y.value=!0,K(),O()}catch(t){console.error("Kakao Maps API 로드 중 오류 발생:",t)}})),(t,e)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(s.A,{style:{"z-index":"4",width:"1920px"}}),(0,o.Lk)("div",g,[(0,o.Lk)("aside",f,[(0,o.Lk)("section",h,[(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"산 검색"},null,512),[[n.Jo,v.value]]),(0,o.Lk)("img",{id:"search-img",src:"https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png",onClick:U})])]),(0,o.Lk)("div",k,[e[3]||(e[3]=(0,o.Lk)("label",{for:"start-date"},"시작 날짜:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"start-date","onUpdate:modelValue":e[1]||(e[1]=t=>C.value=t)},null,512),[[n.Jo,C.value]]),e[4]||(e[4]=(0,o.Lk)("label",{for:"end-date"},"종료 날짜:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"end-date","onUpdate:modelValue":e[2]||(e[2]=t=>E.value=t)},null,512),[[n.Jo,E.value]]),(0,o.Lk)("button",{class:"filter-button",onClick:x},"필터 적용")]),(0,o.Lk)("section",A,[e[5]||(e[5]=(0,o.Lk)("h2",null,"2024 민원 접수 Top3",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.value,((t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:t.mountainName},[(0,o.Lk)("p",null,(0,c.v_)(a+1)+" : "+(0,c.v_)(t.mountainName)+" "+(0,c.v_)(t.countComplaint)+"건",1)])))),128))]),e[6]||(e[6]=(0,o.Lk)("div",{class:"chart1-section"},[(0,o.Lk)("h2",null,"민원 신고 유형"),(0,o.Lk)("canvas",{id:"doughnutChart"})],-1))]),(0,o.Lk)("main",b,[(0,o.Lk)("div",{id:"map",ref_key:"mapContainer",ref:a,class:"map-container"},null,512),e[7]||(e[7]=(0,o.Fv)('<div id="grapth" data-v-4fe5c2f8><section class="bottomchart-section" data-v-4fe5c2f8><h2 id="monthly_stat" data-v-4fe5c2f8>월별 민원 통계</h2><canvas id="monthlyChart" data-v-4fe5c2f8></canvas></section><div class="bottomchart-section" data-v-4fe5c2f8><h2 data-v-4fe5c2f8>계절별 민원</h2><canvas id="statsChart" data-v-4fe5c2f8></canvas></div></div>',1))])])],64))}},v=e(1241);const w=(0,v.A)(m,[["__scopeId","data-v-4fe5c2f8"]]);var y=w},8249:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcY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"},7024:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},1071:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=853.4c40d300.js.map